<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>41-小程序（重制版） | 许小墨のBlog</title><meta name="author" content="许小墨,1440023258@qq.com"><meta name="copyright" content="许小墨"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="微信小程序一、概述1、小程序是什么？小程序，最早是特指微信小程序，英文名MiniProgram，是一种不需要下载安装即可使用的应用。 官方文档：https:&#x2F;&#x2F;developers.weixin.qq.com&#x2F;miniprogram&#x2F;dev&#x2F;framework&#x2F;  无需安装卸载 即用即开 对于h5 开发人员门槛低 ，使用html,css.js  小程序码：  2、与网页程序h5开发的区别？小程序的"><meta property="og:type" content="article"><meta property="og:title" content="41-小程序（重制版）"><meta property="og:url" content="https://angelxyj.github.io/posts/3fa6c23b.html"><meta property="og:site_name" content="许小墨のBlog"><meta property="og:description" content="微信小程序一、概述1、小程序是什么？小程序，最早是特指微信小程序，英文名MiniProgram，是一种不需要下载安装即可使用的应用。 官方文档：https:&#x2F;&#x2F;developers.weixin.qq.com&#x2F;miniprogram&#x2F;dev&#x2F;framework&#x2F;  无需安装卸载 即用即开 对于h5 开发人员门槛低 ，使用html,css.js  小程序码：  2、与网页程序h5开发的区别？小程序的"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://angelxyj.github.io/img/17.jpg"><meta property="article:published_time" content="2023-06-30T18:50:34.000Z"><meta property="article:modified_time" content="2024-10-01T16:38:42.607Z"><meta property="article:author" content="许小墨"><meta property="article:tag" content="前端"><meta property="article:tag" content="框架"><meta property="article:tag" content="小程序"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://angelxyj.github.io/img/17.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://angelxyj.github.io/posts/3fa6c23b.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/favicon-16x16.png"><link rel="mask-icon" href="/img/siteicon/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",preload:!1,top_n_per_article:1,unescape:!1,languages:{hits_empty:"找不到您查询的内容：${query}",hits_stats:"共找到 ${hits} 篇文章"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:void 0,highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:200},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!0},runtime:"天",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:50,languages:{author:"作者: 许小墨",link:"链接: ",source:"来源: 许小墨のBlog",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体中文",cht_to_chs:"你已切换为简体中文",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"bottom-left"},infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!0,islazyload:!1,isAnchor:!1,percent:{toc:!0,rightside:!0},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"41-小程序（重制版）",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2024-10-01 16:38:42"}</script><script>(e=>{e.saveToLocal={set:(e,t,o)=>{if(0===o)return;const a={value:t,expiry:Date.now()+864e5*o};localStorage.setItem(e,JSON.stringify(a))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!(Date.now()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=a,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,o())},Object.keys(t).forEach((e=>{n.setAttribute(e,t[e])})),document.head.appendChild(n)})),e.getCSS=(e,t=!1)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onerror=a,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,o())},document.head.appendChild(n)})),e.activateDarkMode=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{const e=document.getElementById("loading-box"),d=document.body,o=()=>{d.style.overflow="",e.classList.add("loaded")},t=()=>{d.style.overflow="hidden",e.classList.remove("loaded")};t(),window.addEventListener("load",(()=>{o()})),document.addEventListener("pjax:send",(()=>{t()})),document.addEventListener("pjax:complete",(()=>{o()}))})()</script><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/touxiang.webp" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">198</div></a><a href="/%E6%A0%87%E7%AD%BE/"><div class="headline">标签</div><div class="length-num">183</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">42</div></a></div><hr class="custom-hr"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i> <span>清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i> <span>照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i> <span>电影</span></a></li><li><a class="site-page child" href="/poems/"><i class="fa-fw fas fa-book"></i> <span>文学鉴赏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i> <span>关于</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-compass"></i> <span>关于</span></a></li><li><a class="site-page child" href="/sponsor/"><i class="fa-fw fas fa-thumbs-up"></i> <span>打赏</span></a></li><li><a class="site-page child" href="/resume/"><i class="fa-fw fas fa-book"></i> <span>简历</span></a></li><li><a class="site-page child" href="/TodoList"><i class="fa-fw fab fa-internet-explorer"></i> <span>计划</span></a></li><li><a class="site-page child" href="/ChatGPT/"><i class="fa-fw fas fa-fan"></i> <span>GPT</span></a></li><li><a class="site-page child" href="/messageboard/"><i class="fa-fw fas fa-comment-dots"></i> <span>留言板</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url('/img/17.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="许小墨のBlog"><span class="site-name">许小墨のBlog</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i> <span>清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i> <span>音乐</span></a></li><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i> <span>照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i> <span>电影</span></a></li><li><a class="site-page child" href="/poems/"><i class="fa-fw fas fa-book"></i> <span>文学鉴赏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i> <span>关于</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-compass"></i> <span>关于</span></a></li><li><a class="site-page child" href="/sponsor/"><i class="fa-fw fas fa-thumbs-up"></i> <span>打赏</span></a></li><li><a class="site-page child" href="/resume/"><i class="fa-fw fas fa-book"></i> <span>简历</span></a></li><li><a class="site-page child" href="/TodoList"><i class="fa-fw fab fa-internet-explorer"></i> <span>计划</span></a></li><li><a class="site-page child" href="/ChatGPT/"><i class="fa-fw fas fa-fan"></i> <span>GPT</span></a></li><li><a class="site-page child" href="/messageboard/"><i class="fa-fw fas fa-comment-dots"></i> <span>留言板</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">41-小程序（重制版）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-30T18:50:34.000Z" title="发表于 2023-06-30 18:50:34">2023-06-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-01T16:38:42.607Z" title="更新于 2024-10-01 16:38:42">2024-10-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/">前端开发</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/">框架开发</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">18.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>75分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="41-小程序（重制版）"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="微信小程序"><a href="#微信小程序" class="headerlink" title="微信小程序"></a>微信小程序</h1><h1 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h1><h2 id="1、小程序是什么？"><a href="#1、小程序是什么？" class="headerlink" title="1、小程序是什么？"></a>1、小程序是什么？</h2><p>小程序，最早是特指微信小程序，英文名MiniProgram，是一种<strong>不需要下载安装即可使用</strong>的应用。</p><p>官方文档：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/">https://developers.weixin.qq.com/miniprogram/dev/framework/</a></p><ul><li>无需安装卸载</li><li>即用即开</li><li>对于h5 开发人员门槛低 ，使用html,css.js</li></ul><p>小程序码：</p><p><img src="https://i.loli.net/2021/10/15/Bf6mPs4ijRSQo8D.png" alt="image-20211015092233419"></p><h2 id="2、与网页程序h5开发的区别？"><a href="#2、与网页程序h5开发的区别？" class="headerlink" title="2、与网页程序h5开发的区别？"></a>2、与网页程序h5开发的区别？</h2><p>小程序的主要开发语言是 JavaScript ，对于前端开发者而言，上手容易。</p><ul><li><p>小程序</p><ul><li><p>依赖于微信或其他APP上（宿主）的一个应用形式，无法脱离其所在的APP</p></li><li><p>在特定的环境中去开发，所用的组件、UI都是确定好了的，也不用去考虑兼容问题</p></li><li><p>在速度上，小程序基于APP端去实现，在使用时就感到很流畅</p></li></ul></li><li><p>普通网页</p><ul><li>网页开发用在移动端或者PC端的网页开发技术</li><li>开发时会有开发工具的选择、框架的选择、UI的选择等问题，还要兼顾到浏览器是否兼容的问题</li><li>网页在不同的浏览器或设备中解析加载会比较慢一些</li><li>网页运行在浏览器中，当然有一些App内嵌了浏览器也是可以运行的</li><li>网页是需要通过网址来进行访问的</li></ul></li></ul><h2 id="3、与传统App开发的区别？"><a href="#3、与传统App开发的区别？" class="headerlink" title="3、与传统App开发的区别？"></a>3、与传统App开发的区别？</h2><ul><li><p>小程序</p><ul><li>依赖于微信或其他APP上的一个应用形式，无法脱离其所在的APP</li><li>无需要安装，开发技术要求较低，无需考虑应用兼容适配问题</li></ul></li><li><p>传统App</p><ul><li>独立运行，不需要依赖于谁</li><li>需要用户安装，开发技术要求较高且开发时还需要解决设备兼容适配问题</li></ul></li></ul><h2 id="4、小程序框架结构"><a href="#4、小程序框架结构" class="headerlink" title="4、小程序框架结构"></a>4、小程序框架结构</h2><p>整个小程序框架系统分为两部分： 视图层 和 逻辑层</p><ul><li>逻辑层 js</li><li>数据驱动视图 只需要在逻辑层更改数据，视图层内容就会相应更新。</li></ul><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/ceae6b9c066bc1d76b74b48f6a0908240f3622fe.png?sign=275325cfca1f84683602463ab2d50b98&t=5face7d2"></p><h1 id="二、帐号申请与登录设置"><a href="#二、帐号申请与登录设置" class="headerlink" title="二、帐号申请与登录设置"></a>二、帐号申请与登录设置</h1><h2 id="1、帐号申请"><a href="#1、帐号申请" class="headerlink" title="1、帐号申请"></a>1、帐号申请</h2><p>官网: <a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/">https://mp.weixin.qq.com/</a></p><p>微信小程序允许个人开发者申请账号，申请成功后才能进行下一步的学习和开发。</p><p>打开上述地址，在首页点击右上角的“立即注册”：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/49cb632a8092bef8215b7eea8332d2026ac669ae.png?sign=cb7d9a1656f3f0115427f58867274e46&t=5face8d8"></p><p>然后注册类型选择<code>小程序</code>：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/15fd9fa9a7f634e20db7e0469f33fa70cf721e38.png?sign=60f703428762e4ac5712269cc2d03442&t=5face8fa"></p><p>随后按照页面提示进行注册信息的填写以完成注册。</p><h2 id="2、登录及配置获取"><a href="#2、登录及配置获取" class="headerlink" title="2、登录及配置获取"></a>2、登录及配置获取</h2><p>申请成功后，回到网站首页，使用注册的邮箱账号和密码（或微信扫码）进入到微信小程序官方控制平台中。</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/6f48e543227f4e9bd9051624fc87b017e2535f3f.png?sign=b099a9a6cdfc8cb46f6793c2498c7376&t=5facea22"></p><p>进入微信小程序官方控制平台后，主要为了得到开发所要用到的<code>appid</code>和<code>secret</code>这两项值。这两项值后续需要用到：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/7855b4f5c3983b096dfd6cc4cba261285308a6e5.png?sign=540c12a29a7c37e0afb970d36b8b79b7&t=5faceeed"></p><p>需要注意：AppSecret不会明文存储并显示在页面上，需要点击<code>生成</code>按钮在显示弹窗后自行保存并记录，一旦离开当前页面（或刷新）就无法查看已经生成的AppSecret，只能对原先的进行重置。</p><h1 id="三、微信开发者工具"><a href="#三、微信开发者工具" class="headerlink" title="三、微信开发者工具"></a>三、微信开发者工具</h1><h2 id="1、工具的下载与安装"><a href="#1、工具的下载与安装" class="headerlink" title="1、工具的下载与安装"></a>1、工具的下载与安装</h2><p>工具集成了公众号网页调试和小程序调试两种开发模式，开发者可以编译小程序在电脑上看到模拟器编译效果，此处根据电脑类型自行下载如下：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/a5a22d87209b18420da1966659f5fbf3f2299577.png?sign=fd688f7247a0f9284b6d567deb9b14c1&t=5facf4e0"></p><h2 id="2、helloworld项目"><a href="#2、helloworld项目" class="headerlink" title="2、helloworld项目"></a>2、helloworld项目</h2><p>在桌面上双击运行<code>微信开发者工具</code>，参考以下图示进行项目创建：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/8293dde4d26eaa6f05101cd87c29fa0765c0f5fa.png?sign=ff380c23999b57de816051334d24fb3b&t=5facff01"></p><p>创建好项目后显示效果如下：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/95066005c96546ca74f56ff4dbdf8606b89ba06a.png?sign=c8efedddbdc170ca85e2087421906300&t=5facffea"></p><h1 id="四、小程序目录结构及配置"><a href="#四、小程序目录结构及配置" class="headerlink" title="四、小程序目录结构及配置"></a>四、小程序目录结构及配置</h1><h2 id="1、目录结构"><a href="#1、目录结构" class="headerlink" title="1、目录结构"></a>1、目录结构</h2><p>小程序包含一个描述整体程序（全局）的app和多个描述各自（局部）页面的page。</p><p>一个小程序<strong>主体部分</strong>由三个文件组成，必须放在项目的<strong>根目录</strong>，如下：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/2135ba9a9f226c567fddce8fbe5c10a4543049be.png?sign=959ad7166e1c783606f1a33116ac39c1&t=5fad0559"></p><table><thead><tr><th><strong>文件</strong></th><th><strong>必填</strong></th><th><strong>作用</strong></th></tr></thead><tbody><tr><td><strong>app.js</strong></td><td>是</td><td>小程序逻辑-小程序入口文件</td></tr><tr><td><strong>app.json</strong></td><td>是</td><td>小程序公共配置文件</td></tr><tr><td><strong>app.wxss</strong></td><td>否</td><td>小程序公共样式表</td></tr></tbody></table><p>一个小程序page页面由四个文件组成，分别是：</p><table><thead><tr><th><strong>文件类型</strong></th><th><strong>必填</strong></th><th><strong>作用</strong></th></tr></thead><tbody><tr><td><strong>js</strong></td><td>是</td><td>页面逻辑</td></tr><tr><td><strong>wxml</strong></td><td>是</td><td>页面结构</td></tr><tr><td><strong>wxss</strong></td><td>否</td><td>页面样式表</td></tr><tr><td><strong>json</strong></td><td>否</td><td>页面配置</td></tr></tbody></table><h2 id="2、全局配置文件app-json"><a href="#2、全局配置文件app-json" class="headerlink" title="2、全局配置文件app.json"></a>2、全局配置文件app.json</h2><p>参考网址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html">https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html</a></p><p>app.json文件用来对微信小程序进行<strong>全局</strong>配置的，设置小程序页面数量、窗口表现、设置底部或顶部菜单、网络请求超时时间等。</p><p>app.json由于是<code>json文件</code>，所以其中不能添加任何注释，key和value字符串必须用<strong>双引号</strong>引起来，数组或对象最后<strong>一定不能</strong>有逗号。</p><p>常用的全局配置： 如何和页面的.json配置冲突，以页面为准</p><ul><li><strong>pages：注册小程序的页面路径列表</strong></li></ul><blockquote><p>数组的第一项代表小程序的初始页面（首页）。小程序中新增&#x2F;减少页面，都需要对 pages 数组进行修改。</p></blockquote><ul><li><strong>window：全局的默认窗口表现</strong></li></ul><blockquote><p>用于设置小程序的状态栏、导航条、标题、窗口背景色</p></blockquote><ul><li><p><strong>tabBar：小程序底部或顶部菜单定义（换句话说，小程序的菜单是通过json配置来实现的）</strong></p></li><li><p>networkTimeout：小程序网络请求超时时间设置</p></li><li><p>usingComponents：自定义组件配置</p></li></ul><p><img src="https://i.loli.net/2021/10/15/isTAIxWZSV1uDmL.png" alt="image-20211015095124049"></p><h2 id="3、全局样式文件app-wxss"><a href="#3、全局样式文件app-wxss" class="headerlink" title="3、全局样式文件app.wxss"></a>3、全局样式文件app.wxss</h2><p>定义在 app.wxss 中的样式为全局样式，作用于每一个页面。在 page 的 wxss 文件中定义的样式为局部样式，只作用在对应的页面，并会覆盖 app.wxss 中相同的选择器。</p><p>如何和页面的样式文件冲突，以页面的配置文件为准</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**app.wxss**/</span></span><br><span class="line"><span class="comment">/* app.wxss 全局css样式*/</span></span><br><span class="line"><span class="comment">/* 引入公共css */</span></span><br><span class="line"><span class="comment">/* @import &#x27;/static/css/common.wxss&#x27;; */</span></span><br><span class="line">page&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">750</span>rpx;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">24</span>rpx;</span><br><span class="line">  <span class="attribute">background</span>:deeppink</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4、小程序生命周期"><a href="#4、小程序生命周期" class="headerlink" title="4、小程序生命周期"></a>4、小程序生命周期</h2><p>每个小程序都需要在 <code>app.js</code> 中调用 <code>App</code> 方法注册小程序实例，绑定生命周期回调函数、错误监听和页面不存在监听函数等。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="comment">// 注册整个小程序实例对象 </span></span><br><span class="line"><span class="comment">// 必须调用且只能调用一次</span></span><br><span class="line"><span class="title class_">App</span>(&#123;</span><br><span class="line">  <span class="comment">// 整个小程序得生命周期函数</span></span><br><span class="line">  <span class="title function_">onLaunch</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;监听小程序初始化&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onShow</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;监听小程序启动或切前台。&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="title function_">onHide</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;监听小程序切后台。&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">globalData</span>: &#123;</span><br><span class="line">    <span class="attr">nameArr</span>: [<span class="string">&#x27;张文静&#x27;</span>,<span class="string">&#x27;岳小慧&#x27;</span>,<span class="string">&#x27;宋江燕&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5、全局数据-globalData"><a href="#5、全局数据-globalData" class="headerlink" title="5、全局数据 globalData"></a>5、全局数据 globalData</h2><p>整个小程序只有一个 App 实例，是全部页面共享的。开发者可以通过 <code>getApp</code> 方法获取到全局唯一的 App 实例，获取App上的数据或调用开发者注册在 <code>App</code> 上的函数。</p><p>在app.js 文件中，定义globalData 属性，该属性中存放的数据在每个页面都可以获取和修改。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在app.js 中定义全局数据</span></span><br><span class="line"><span class="attr">globalData</span>: &#123;</span><br><span class="line">    <span class="attr">nameArr</span>: [<span class="string">&#x27;张文静&#x27;</span>,<span class="string">&#x27;岳小慧&#x27;</span>,<span class="string">&#x27;宋江燕&#x27;</span>]</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在 index.js 中获取</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">getApp</span>(); <span class="comment">//获取App的实例</span></span><br><span class="line"><span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(app) <span class="comment">//获取 App 实例，并获取全局变量数据 globalData</span></span><br><span class="line"> &#125;,</span><br><span class="line"><span class="title function_">handleFn</span>(<span class="params"></span>)&#123;</span><br><span class="line">    app.<span class="property">globalData</span>.<span class="property">nameArr</span>.<span class="title function_">push</span>(<span class="string">&#x27;逯鑫&#x27;</span>) <span class="comment">//可以在事件中修改 globalData全局数据</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="五、WXML语法"><a href="#五、WXML语法" class="headerlink" title="五、WXML语法"></a>五、WXML语法</h1><p>WXML：页面的视图结构文件。简单来说，其是基于html的基础之上，小程序框架自己设计的一套标记语言。使用这套标记语言，结合JS逻辑部分、样式部分（WXSS），可以允许开发者构建出页面的效果。</p><p><strong>注意点：该语言标签严格要求，标签有开始，必须也有结束。</strong></p><h2 id="1、WXML数据绑定"><a href="#1、WXML数据绑定" class="headerlink" title="1、WXML数据绑定"></a>1、WXML数据绑定</h2><p>a. 页面中的数据都是来自于页面的逻辑文件（js文件）的data属性</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2021/02/954c2aa03ece2e18a3c6991d881767cdee897325.png?sign=0b8edfc5e8439af5c0f2b01f6a65d1bb&t=6018d3e9"></p><p>例如，我们也在<code>page/index/index.js</code>文件中新增一个数据“msg”，其值是“HTML5”。则如下：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2021/02/01d7bef917b9c7bc1be4eb58a5ee397a18a690c6.png?sign=bb079ddaebc734133ac9aebbceb8271b&t=6018d47d"></p><p>b. 数据可以在页面结构文件（wxml文件）中展示，例如将刚才index页面的msg数据在index.wxml中展示输出（类似于vue的插值表达式）</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;text class=&quot;user-motto&quot;&gt;&#123;&#123;msg&#125;&#125;&lt;/text&gt;</span><br></pre></td></tr></table></figure><p>c. 使用 <strong>setData</strong> 方法来对数据进行修改。在使用时注意this关键词指向的问题，因为这个方法是对象实例里的方法。例如，假设需要msg数据在页面加载完成后5秒钟将值修改为“H5”，则代码如下：</p><blockquote><p>针对数据的修改一般写在页面的生命周期函数中。</p></blockquote><p>语法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;H5&quot;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2021/02/8c09b56296bdf915357d38b672612be31b6258b6.png?sign=98b31e38a83fabebe85eaa4930b3a24e&t=6018d6a6"></p><h2 id="2、WXML循环"><a href="#2、WXML循环" class="headerlink" title="2、WXML循环"></a>2、WXML循环</h2><p><strong>语法：</strong>其循环的实现与vue及其相似，也是通过标签的属性来实现循环的。其属性如下：</p><ul><li>wx:for：该属性表示循环，其属性值是要循环的数据，<strong>默认下标名为 index，当前项为 item</strong></li><li>wx:key：使用wx:for 渲染列表，必须循环体的唯一标识符，建议可以使用数组每一项得id。</li><li>wx:for-index：（可选）用于自定义索引变量名，默认值是<code>index</code></li><li>wx:for-item：（可选）用于自定义循环到的元素的变量名，默认值是item</li></ul><blockquote><p>关于新建page的操作提示：</p><ul><li>在pages目录下新建一个空的文件夹</li><li>右键新建好的空的文件夹，选择菜单中的“新建page”</li><li>输入页面的名称，回车即可生成page需要的四个文件及其初始化的内容</li><li>根据需要决定是否要设置页面为默认页面（在app.json文件中修改新建页面的顺序）</li></ul></blockquote><p>定义一个数据源，稍后演示循环操作：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">users</span>: [<span class="string">&#x27;张三&#x27;</span>, <span class="string">&#x27;李四&#x27;</span>, <span class="string">&#x27;王五&#x27;</span>],</span><br><span class="line">        <span class="attr">obj</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">user</span>: <span class="string">&#x27;zhangsan&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">user</span>: <span class="string">&#x27;lisi&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="number">3</span>,</span><br><span class="line">            <span class="attr">user</span>: <span class="string">&#x27;wangwu&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">       ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>参考代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/wxfor/wxfor.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>pages/wxfor/wxfor.wxml<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 在wxml里面不用div，div可以用view标签替代 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 使用默认的索引和元素变量循环 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;users&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;index&#125;&#125; - &#123;&#123;item&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 使用自定义的索引和元素变量循环 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;users&#125;&#125;&quot;</span> <span class="attr">wx:for-index</span>=<span class="string">&quot;key&quot;</span> <span class="attr">wx:for-item</span>=<span class="string">&quot;val&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;key&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;key&#125;&#125; - &#123;&#123;val&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 循环数组对象的操作 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">wx:for</span>=<span class="string">&quot;&#123;&#123;obj&#125;&#125;&quot;</span> <span class="attr">wx:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">    &#123;&#123;item.id&#125;&#125; - &#123;&#123;item.user&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2021/02/dcf6f89eab6818629a5a4f338c6535489f4c1ea1.png?sign=62af67205e8a62f125d90372762b0870&t=6018dc41"></p><h2 id="3、WXML判断"><a href="#3、WXML判断" class="headerlink" title="3、WXML判断"></a>3、WXML判断</h2><p><strong>语法：</strong>与vue一样，小程序中的判断也是通过<strong>特定的属性</strong>来实现的。属性是：wx:if、wx:elif、wx:else。</p><p>例如，有以下的数据源：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">age</span>: <span class="number">19</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在视图结构代码中依据是否成年的规则去判定age是否成年了：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/wxif/wxif.wxml--&gt;</span><br><span class="line">&lt;text&gt;pages/wxif/wxif.wxml&lt;/text&gt;</span><br><span class="line"></span><br><span class="line">&lt;view wx:if=&quot;&#123;&#123;age &gt; 18&#125;&#125;&quot;&gt;</span><br><span class="line">    成年了，可以去蹦迪了</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;view wx:elif=&quot;&#123;&#123;age == 18&#125;&#125;&quot;&gt;</span><br><span class="line">    刚好成年，不建议现在去蹦迪</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;view wx:else&gt;</span><br><span class="line">    未成年，回去写作业去</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><h2 id="4、模板页面引用"><a href="#4、模板页面引用" class="headerlink" title="4、模板页面引用"></a>4、模板页面引用</h2><ul><li><p>WXML提供模板（template）可以在模板中定义代码片段，然后在不同的地方调用。</p></li><li><p>使用 name 属性，作为模板的名字。然后在<code>&lt;template/&gt;</code>内定义代码片段，使用 is 属性，声明需要的使用的模板，然后将模板所需要的 data 传入</p></li><li><p>WXML提供两种文件引用方式：<code>import</code>（高级）和<code>include</code></p></li><li><p>import：有点类似以于二阶段，可以把一些常用自定义函数，写到一个文件中，在用的时候可以导入进来，然后再去调用里面的特定的函数。（按需使用）</p></li><li><p>include：将目标文件中所有的代码（除了template标签段、wxs标签段）统统在引入的位置直接用（直接使用）</p></li></ul><h3 id="4-1-页面内使用模板："><a href="#4-1-页面内使用模板：" class="headerlink" title="4.1 页面内使用模板："></a>4.1 页面内使用模板：</h3><p>当前页面内定义模板，并在当前页面使用，数据item 为当前页js 中定义的数据。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 定义模板 --&gt;</span><br><span class="line">&lt;template name=&quot;msgItem&quot;&gt;</span><br><span class="line">   &lt;view&gt;</span><br><span class="line">      &lt;text&gt; &#123;&#123;index&#125;&#125;: &#123;&#123;msg&#125;&#125; &lt;/text&gt;</span><br><span class="line">      &lt;text&gt; Time: &#123;&#123;time&#125;&#125; &lt;/text&gt;</span><br><span class="line">   &lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"> &lt;!-- 使用模板 --&gt;</span><br><span class="line">&lt;template is=&quot;msgItem&quot; data=&quot;&#123;&#123;...item&#125;&#125;&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- js --&gt;</span><br><span class="line">Page(&#123;</span><br><span class="line"> data:&#123;</span><br><span class="line">   item: &#123;</span><br><span class="line">     index: 0,</span><br><span class="line">     msg: &#x27;我是模板&#x27;,</span><br><span class="line">     time: &#x27;2016-09-15&#x27;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;,</span><br></pre></td></tr></table></figure><h1 id="六、WXSS样式"><a href="#六、WXSS样式" class="headerlink" title="六、WXSS样式"></a>六、WXSS样式</h1><p>WXSS是一套样式语言，用于描述WXML的组件样式（有点CSS描述HTML样式的感觉）。</p><p>为了适应广大的前端开发者，WXSS具有CSS大部分特性。同时为了更适合开发微信小程序，WXSS对CSS进行了扩充以及修改。例如：</p><ul><li>新增了尺寸单位<ul><li>WXSS在底层支持新的尺寸单位rpx，可以根据屏幕宽度进行自适应，响应式尺寸单位</li><li>小程序中全屏尺寸数值是 : 750rpx</li><li>与px的换算关系：</li></ul></li></ul><table><thead><tr><th align="left">设备</th><th align="left">rpx换算px (屏幕宽度&#x2F;750)</th><th align="left">px换算rpx (750&#x2F;屏幕宽度)</th></tr></thead><tbody><tr><td align="left">iPhone5</td><td align="left">1rpx &#x3D; 0.42px</td><td align="left">1px &#x3D; 2.34rpx</td></tr><tr><td align="left">iPhone6</td><td align="left">1rpx &#x3D; 0.5px</td><td align="left">1px &#x3D; 2rpx</td></tr><tr><td align="left">iPhone6 Plus</td><td align="left">1rpx &#x3D; 0.552px</td><td align="left">1px &#x3D; 1.81rpx</td></tr></tbody></table><ul><li><p>提供了全局的样式和局部样式</p><ul><li>定义在app.wxss中的样式为全局样式，作用于每一个页面</li><li>在page的wxss文件中定义的样式为局部样式，只作用在对应的页面，并会覆盖app.wxss中相同的选择器</li></ul></li><li><p>此外WXSS仅支持部分CSS选择器，目前支持的选择器有：</p></li></ul><table><thead><tr><th><strong>选择器</strong></th><th><strong>样例</strong></th><th><strong>样例描述</strong></th></tr></thead><tbody><tr><td><strong>.class</strong></td><td>.intro</td><td>选择所有拥有class&#x3D;”intro”的组件</td></tr><tr><td><strong>#id</strong></td><td>#firstname</td><td>选择拥有id&#x3D;”firstname”的组件</td></tr><tr><td><strong>element</strong></td><td>view</td><td>选择所有view组件</td></tr><tr><td><strong>element, element</strong></td><td>view, checkbox</td><td>选择所有文档的view组件和所有的checkbox组件</td></tr><tr><td><strong>::after</strong></td><td>view::after</td><td>在view组件后边插入内容</td></tr><tr><td><strong>::before</strong></td><td>view::before</td><td>在view组件前边插入内容</td></tr></tbody></table><ul><li><strong>单位 rpx 可以根据屏幕宽度进行自适应。规定屏幕宽为750rpx。在 iPhone6 上，屏幕宽度为375px，1rpx &#x3D; 0.5px &#x3D; 1像素，开发建议用 iPhone6 作为视觉稿的标准。</strong></li></ul><h1 id="七、tabBar"><a href="#七、tabBar" class="headerlink" title="七、tabBar"></a>七、tabBar</h1><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#tabBar">https://developers.weixin.qq.com/miniprogram/dev/reference/configuration/app.html#tabBar</a></p><p><code>tabBar</code>就是小程序底部的导航菜单，小程序的tabBar使用比较简单，只需要在全局配置文件app.json中加上下面的配置即可，参考代码如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;color&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;selectedColor&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">          <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pagePath&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;iconPath&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;selectedIconPath&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pagePath&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;iconPath&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;selectedIconPath&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;text&quot;</span></span><br><span class="line">          <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>参考配置实例：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#C0C0C0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FFFFFF&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/include/include&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;导入&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./assets/images/more.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./assets/images/more-active.png&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./assets/images/cookbook.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;./assets/images/cookbook-active.png&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>注意点：</p><ul><li>pages数组中的默认页面（第一个元素）一定要出现在tabbar配置的list数组中，如果没有则底部菜单是不显示的；</li><li>如果默认页面在菜单的list数组中，但是不是list数组的一个元素，那么默认页面在第一个元素，那个菜单就会被默认选中；</li><li>&#x3D;&#x3D;正常来讲，pages数组中的第一个元素（页面），即菜单list数组中的第一个栏目；&#x3D;&#x3D;</li></ul><h1 id="八、页面生命周期"><a href="#八、页面生命周期" class="headerlink" title="八、页面生命周期"></a>八、页面生命周期</h1><p>网址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html">https://developers.weixin.qq.com/miniprogram/dev/reference/api/Page.html</a></p><p>由框架自己触发的一系统事件函数（钩子函数）。</p><p>小程序数据互交就是通过不同的事件函数来完成的，了解生命周期函数，对于以后的数据交互是非常重要的。</p><ul><li><strong>data属性</strong></li></ul><p>页面的初始数据</p><ul><li><strong>onLoad(Object[json] query)</strong></li></ul><p>页面加载时触发。一个页面只会调用一次，可以在onLoad的参数中获取打开当前页面路径中的参数。</p><p>参数说明</p><table><thead><tr><th><strong>名称</strong></th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><strong>query</strong></td><td>Object</td><td>打开当前页面路径中的参数 json对象</td></tr></tbody></table><ul><li><strong>onShow()</strong></li></ul><p>页面显示&#x2F;切入前台时触发。一个页面可以触发N次。</p><ul><li><strong>onReady()</strong></li></ul><p>页面初次渲染完成时触发。一个页面只会调用一次。</p><ul><li><strong>onHide()</strong></li></ul><p>页面隐藏&#x2F;切入后台时触发。一个页面可以触发多次</p><ul><li><strong>onPullDownRefresh</strong></li></ul><p>监听用户下拉动作，此事件需要在app.json文件中window节点中“开启全局的下拉刷新”</p><p>“enablePullDownRefresh”:true,才能触发它 作用：下拉加载更多</p><ul><li><strong>onReachBottom</strong></li></ul><p>页面上拉触底事件的处理函数，需要当前页面内容超过一屏显示 作用：上拉加载更多</p><ul><li><strong>onPageScroll</strong></li></ul><p>页面滚动触发事件的处理函数，需要当前页面内容超过一屏显示 作用：滚动事件监听</p><ul><li><strong>onShareAppMessage</strong></li></ul><p>用户点击右上角转发，触发此方法，在此方法中可以自定义转发的内容。 作用：自定义分享</p><blockquote><p>分享页面的路径，必须以“&#x2F;”开头。</p></blockquote><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2021/02/c3fc1b5607ff54d1cf9fbb1bd71a5d9aee164ca3.png?sign=f68422a4f3c3ea34c804f17f65e9368c&t=6019214c"></p><h1 id="九、自定义事件"><a href="#九、自定义事件" class="headerlink" title="九、自定义事件"></a>九、自定义事件</h1><h2 id="1、事件绑定"><a href="#1、事件绑定" class="headerlink" title="1、事件绑定"></a>1、事件绑定</h2><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html#%E4%BA%8B%E4%BB%B6%E8%AF%A6%E8%A7%A3">https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html#%E4%BA%8B%E4%BB%B6%E8%AF%A6%E8%A7%A3</a></p><ul><li><p>绑定事件两种写法</p><ul><li>绑定冒泡事件（不会帮我们阻止冒泡）【主要】<ul><li>语法：bind事件类型&#x3D;”方法名” <code>方法名不能加括号，而且不能传参</code></li></ul></li><li>绑定非冒泡事件（会帮我们阻止冒泡）<ul><li>语法：catch事件类型&#x3D;”方法名” <code>方法名不能加括号，而且不能传参</code></li></ul></li></ul></li><li><p>上述语法还支持在属性名中间加上“:”写法，例如：</p><ul><li>bind:事件类型</li><li>catch:事件类型</li><li>自基础版本库2.8.1以后所有的事件都支持加“:”写法</li></ul></li><li><p>特别需要注意，事件类型有可能其名称与之前大不同，例如以前的点击事件类型名字是<code>click</code>，在这里点击事件其实就是手指触摸事件，官网规定触摸事件是<code>tap</code>。</p></li><li><p>小程序事件 有哪些？查看如下对应官网地址：</p><p><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html">https://developers.weixin.qq.com/miniprogram/dev/framework/view/wxml/event.html</a></p></li></ul><p>例如，声明一个view给其绑定一个点击事件（冒泡事件）：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/eventBind/eventBind.wxml--&gt;</span><br><span class="line">&lt;text&gt;pages/eventBind/eventBind.wxml&lt;/text&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 给view标签绑定点击事件 --&gt;</span><br><span class="line">&lt;view bindtap=&quot;tapHandler&quot;&gt;</span><br><span class="line">    点我一下有惊喜</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 给view绑定长按事件 --&gt;</span><br><span class="line">&lt;view bind:touchstart=&quot;start&quot; bind:touchend=&quot;end&quot;&gt;</span><br><span class="line">    蓄力发动技能</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p>随后需要在页面的js逻辑层文件中写对应的处理程序：tapHandler，参考代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">time</span>: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * tap事件的处理程序</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">tapHandler</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;的确是点了，惊喜是：这节结束就下课。&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 蓄力开始触发的事件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">start</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 获取当前的时间并记录</span></span><br><span class="line">        <span class="keyword">let</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">time</span>: now</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;吟唱中.....&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/** 蓄力结束触发的事件 */</span></span><br><span class="line">    <span class="title function_">end</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> diffTime = <span class="title class_">Date</span>.<span class="title function_">now</span>() - <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">time</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;技能发动完毕，cd....&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;本次蓄力耗时&#x27;</span> + diffTime + <span class="string">&#x27;毫秒&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ......</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="2、事件对象"><a href="#2、事件对象" class="headerlink" title="2、事件对象"></a>2、事件对象</h2><p>当组件触发事件时，<strong>逻辑层绑定该事件的处理方法会收到一个事件对象</strong>。通过此对象来进行小程序的自定义事件参数据传递。</p><p>事件对象在小程序中是非常有意义的，这点与vue和react不同。在小程序中，<strong>事件对象是给事件处理程序传递参数的唯一方式</strong>。</p><p>BaseEvent基础事件对象属性列表：</p><table><thead><tr><th><strong>属性</strong></th><th><strong>类型</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><strong>type</strong></td><td>String</td><td>事件类型</td></tr><tr><td><strong>timeStamp</strong></td><td>Integer</td><td>页面打开到触发事件所经过的毫秒数。</td></tr><tr><td><strong>target</strong></td><td>Object</td><td>触发事件的组件的一些属性值集合</td></tr><tr><td><strong>currentTarget</strong></td><td>Object</td><td>当前组件的一些属性值集合</td></tr></tbody></table><p>注意点：target属性与currentTarget，在部分场景下是一样的，当然也存在不一样的情况。</p><ul><li><p>如果事件依附的这个组件（标签）不存在子组件（标签）并且子有属性的时候，两者一样</p></li><li><p>如果事件依附的这个组件（标签）存在子组件（标签）并且子有属性的时候，则两者不一样</p></li><li><p>如果以后要获取事件自身的组件（标签）的数据的时候，得使用currentTarget。</p></li><li><p>在小程序中，如果希望在视图结构中通过事件给事件对象传递参数，则可以在标签上使用<code>data-数据名=“数据值”</code>的形式传递，例如参考代码：</p><ul><li><pre><code class="wxml">&lt;!-- 传递参数100 --&gt;
&lt;view bindtap=&quot;tapHandler&quot; id=&quot;efg&quot; data-m=&quot;100&quot;&gt;
    &lt;!-- 传递参数abc --&gt;
    &lt;view id=&quot;abc&quot; data-abc=&quot;abc&quot;&gt;点我触发事件&lt;/view&gt;
&lt;/view&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">- ~~~js</span><br><span class="line">  // 接收参数</span><br><span class="line">  /**</span><br><span class="line">    * 事件对象获取</span><br><span class="line">    * 所有的事件处理程序都有一个默认的参数，这个参数就是事件对象eventObj</span><br><span class="line">    */</span><br><span class="line">  tapHandler(eventObj) &#123;</span><br><span class="line">      console.log(eventObj);</span><br><span class="line">      // 接收事件组件/标签自己的数据</span><br><span class="line">      console.log(eventObj.currentTarget.dataset.m);</span><br><span class="line">      // 获取事件组件/标签子的数据</span><br><span class="line">      console.log(eventObj.target.dataset.abc);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></code></pre></li></ul></li></ul><p>​ 绑定文本框 <code>e.detail.value</code></p><h3 id="4-2-页面外使用模板"><a href="#4-2-页面外使用模板" class="headerlink" title="4.2 页面外使用模板"></a>4.2 页面外使用模板</h3><ul><li><p>把模板定义到外部，然后多个页面间可以共用使用定义的模板</p></li><li><p><code>import</code>可以在当前文件中使用目标文件定义的<code>template</code>（代码区块[标签]，可以有多个）。</p></li></ul><p><strong>语法：</strong><code>&lt;import src=&quot;目标文件的路径&quot;&gt;&lt;/import&gt;</code></p><ol><li>在pages 目录下新建 页面temp，其代码如下：</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/temp/temp.wxml--&gt;</span><br><span class="line">&lt;view&gt;</span><br><span class="line">  &lt;template name=&quot;msgItem&quot;&gt;</span><br><span class="line">      &lt;view&gt;</span><br><span class="line">         &lt;text&gt; &#123;&#123;index&#125;&#125;: &#123;&#123;msg&#125;&#125; &lt;/text&gt;</span><br><span class="line">         &lt;text&gt; Time: &#123;&#123;time&#125;&#125; &lt;/text&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><ol start="2"><li>在其他页面如首页中引入模板temp，并使用模板，数据item1为使用页数据（如首页）</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 引入模板 --&gt;</span><br><span class="line">&lt;import src=&quot;../temp/temp.wxml&quot;/&gt;</span><br><span class="line">&lt;!-- 使用模板 --&gt;</span><br><span class="line">&lt;template is=&quot;msgItem&quot; data=&quot;&#123;&#123;...item1&#125;&#125;&quot;/&gt;</span><br></pre></td></tr></table></figure><p><strong>注意事项：</strong></p><ul><li>import的标签使用可以存在套娃行为，也就是说可以允许出现以下情况：在C文件中importB文件，在B文件中importA文件</li><li>import在套娃的时候需要注意，其使用template存在作用域的概念的。import导入，在使用时只能使用导入的目标文件的template，不能使用导入文件中的导入的目标文件的template。（不允许隔代使用）</li></ul><h3 id="4-3-include"><a href="#4-3-include" class="headerlink" title="4.3  include"></a>4.3 include</h3><p><code>include</code>可以将目标文件<strong>除了</strong><code>&lt;template/&gt;</code> <code>&lt;wxs/&gt;</code>外的整个代码引入，相当于是拷贝到<code>include</code>位置。</p><p><strong>注意：只能引入静态html代码，如果代码中涉及data中得变量，需要在引入到得当前页面data中重新定义该变量。</strong></p><p><strong>语法：</strong><code>&lt;include src=&quot;目标文件的路径&quot;/&gt;</code></p><ol><li>在pages 中新建 temp1页面</li></ol><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/temp1/temp1.wxml--&gt;</span><br><span class="line">&lt;view class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;view wx:for=&#x27;&#123;&#123;fruitArr&#125;&#125;&#x27; wx:key=&#x27;index&#x27;&gt;</span><br><span class="line">        &#123;&#123;item&#125;&#125;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p>2.在使用的页面中引入模板：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用include 引入模板 --&gt;</span><br><span class="line">&lt;include src=&quot;../temp1/temp1.wxml&quot; /&gt;</span><br></pre></td></tr></table></figure><p>小结：</p><ul><li>include形式不支持对目标文件的template和wxs区块的解析</li><li>include引入即使用，import在引入后还需要再去单独使用</li></ul><h1 id="十、常用小程序组件"><a href="#十、常用小程序组件" class="headerlink" title="十、常用小程序组件"></a>十、常用小程序组件</h1><h2 id="1、组件介绍"><a href="#1、组件介绍" class="headerlink" title="1、组件介绍"></a>1、组件介绍</h2><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/view/component.html">https://developers.weixin.qq.com/miniprogram/dev/framework/view/component.html</a></p><p>框架为开发者提供了一系列基础组件，开发者可以通过组合这些基础组件进行快速开发。一个组件通常包括开始标签和结束标签，属性用来修饰这个组件，内容在两个标签之间。</p><h3 id="1-1、属性值类型"><a href="#1-1、属性值类型" class="headerlink" title="1.1、属性值类型"></a>1.1、属性值类型</h3><table><thead><tr><th><strong>类型</strong></th><th><strong>描述</strong></th><th><strong>注解</strong></th></tr></thead><tbody><tr><td><strong>Boolean</strong></td><td>布尔值</td><td>组件写上该属性，不管该属性等于什么，其值都为true，只有组件上没有写该属性时，属性值才为false。如果属性值为变量，变量的值会被转换为Boolean类型**<code>&#123;&#123;&#125;&#125;</code>**</td></tr><tr><td><strong>Number</strong></td><td>数字</td><td>1, 2.5**<code>&#123;&#123;&#125;&#125;</code>**</td></tr><tr><td><strong>String</strong></td><td>字符串</td><td>“string”</td></tr><tr><td><strong>Array</strong></td><td>数组</td><td>[ 1, “string” ]<strong><code>&#123;&#123;&#125;&#125;</code></strong></td></tr><tr><td><strong>Object</strong></td><td>对象</td><td>{ key: value }<strong><code>&#123;&#123;&#125;&#125;</code></strong></td></tr><tr><td><strong>EventHandler</strong></td><td>事件处理函数名</td><td>“handlerName” 是 Page中定义的事件处理函数名</td></tr></tbody></table><h3 id="1-2、共同属性"><a href="#1-2、共同属性" class="headerlink" title="1.2、共同属性"></a>1.2、共同属性</h3><p>所有组件都有的属性：</p><table><thead><tr><th><strong>属性名</strong></th><th><strong>类型</strong></th><th><strong>描述</strong></th><th><strong>注解</strong></th></tr></thead><tbody><tr><td><strong>id</strong></td><td>String</td><td>组件的唯一标示</td><td>保持整个页面唯一</td></tr><tr><td><strong>class</strong></td><td>String</td><td>组件的样式类</td><td>在对应的 WXSS 中定义的样式类</td></tr><tr><td><strong>style</strong></td><td>String</td><td>组件的内联样式</td><td>可以动态设置的内联样式</td></tr><tr><td><strong>hidden</strong></td><td>Boolean [<strong>false</strong>]</td><td>组件是否显示</td><td><strong>所有组件默认显示</strong>，不需要加<code>&#123;&#123;&#125;&#125;</code></td></tr><tr><td><strong>data-*</strong></td><td>Any</td><td>自定义属性</td><td>组件上触发的事件时，会发送给事件处理函数</td></tr><tr><td><strong>bind* &#x2F; catch*</strong></td><td>EventHandler</td><td>组件的事件</td><td>详见事件</td></tr></tbody></table><h2 id="2、视图容器组件"><a href="#2、视图容器组件" class="headerlink" title="2、视图容器组件"></a>2、视图容器组件</h2><h3 id="2-1、swiper"><a href="#2-1、swiper" class="headerlink" title="2.1、swiper"></a>2.1、swiper</h3><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html">https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html</a></p><p>案例：使用swiper展示轮播图</p><p><strong>逻辑层定义数据</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">background</span>: [<span class="string">&quot;https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/bce52a5f143cd3e25c6c39c7a0fd7f276ce43bad.png?sign=f4ec5771f7eabd11226fe5f4b7f0f6e8&amp;t=5fa403f2&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/6018ac895dd29437b1d023c121c7539ecf2e9221.jpeg?sign=47da092f8a6a1650df3da3dd3dd40cb3&amp;t=5fa4041d&quot;</span>,</span><br><span class="line">            <span class="string">&quot;https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/f81d133833b89a18cb1842f449810d16ec5d3c78.jpeg?sign=22eadb72caac161df642aa18b84127a8&amp;t=5fa40431&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="comment">// 是否显示原点</span></span><br><span class="line">        <span class="attr">indicatorDots</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 滑动方向是否为纵向</span></span><br><span class="line">        <span class="attr">vertical</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// 是否自动轮播</span></span><br><span class="line">        <span class="attr">autoplay</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="comment">// 自动切换时间间隔（单个图片显示的时长）</span></span><br><span class="line">        <span class="attr">interval</span>: <span class="number">2000</span>,</span><br><span class="line">        <span class="comment">// 切换的持续时间</span></span><br><span class="line">        <span class="attr">duration</span>: <span class="number">500</span></span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><blockquote><p>图片采用<code>image</code>组件进行展示，其支持对图片进行缩放、裁剪处理。关于<code>image</code>组件的信息，可以访问文档：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/image.html">https://developers.weixin.qq.com/miniprogram/dev/component/image.html</a></p></blockquote><p><strong>实际在wxml中展示</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/swiper/swiper.wxml--&gt;</span><br><span class="line">&lt;text&gt;pages/swiper/swiper.wxml&lt;/text&gt;</span><br><span class="line"></span><br><span class="line">&lt;view class=&quot;page-section page-section-spacing swiper&quot;&gt;</span><br><span class="line">    &lt;swiper indicator-dots=&quot;&#123;&#123;indicatorDots&#125;&#125;&quot; autoplay=&quot;&#123;&#123;autoplay&#125;&#125;&quot; interval=&quot;&#123;&#123;interval&#125;&#125;&quot; duration=&quot;&#123;&#123;duration&#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;block wx:for=&quot;&#123;&#123;background&#125;&#125;&quot; wx:key=&quot;*this&quot;&gt;</span><br><span class="line">            &lt;swiper-item&gt;</span><br><span class="line">                &lt;!-- image标签一般都需要配合图片处理属性去使用：mode。image标签除了展示图以外，还提供了一套对于图片的裁剪，缩放等功能 --&gt;</span><br><span class="line">                &lt;image style=&quot;height: 150px;&quot; src=&quot;&#123;&#123;item&#125;&#125;&quot;/&gt;</span><br><span class="line">            &lt;/swiper-item&gt;</span><br><span class="line">        &lt;/block&gt;</span><br><span class="line">    &lt;/swiper&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p>在设计图片的时候，一定要和设计人员对接好图片的合适尺寸比例。</p><h3 id="2-2、scroll-view"><a href="#2-2、scroll-view" class="headerlink" title="2.2、scroll-view"></a>2.2、scroll-view</h3><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html">https://developers.weixin.qq.com/miniprogram/dev/component/scroll-view.html</a></p><p>案例：实现滚动切换的效果</p><p><strong>逻辑层代码</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/scroll/scroll.js</span></span><br><span class="line"><span class="keyword">const</span> order = [</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="string">&quot;a&quot;</span>,<span class="attr">url</span>:<span class="string">&quot;https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/bce52a5f143cd3e25c6c39c7a0fd7f276ce43bad.png?sign=f4ec5771f7eabd11226fe5f4b7f0f6e8&amp;t=5fa403f2&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="string">&quot;b&quot;</span>,<span class="attr">url</span>:<span class="string">&quot;https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/6018ac895dd29437b1d023c121c7539ecf2e9221.jpeg?sign=47da092f8a6a1650df3da3dd3dd40cb3&amp;t=5fa4041d&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>:<span class="string">&quot;c&quot;</span>,<span class="attr">url</span>:<span class="string">&quot;https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/f81d133833b89a18cb1842f449810d16ec5d3c78.jpeg?sign=22eadb72caac161df642aa18b84127a8&amp;t=5fa40431&quot;</span>&#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="comment">// 默认要显示的元素</span></span><br><span class="line">        <span class="attr">toView</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">        <span class="comment">// 绑定数据给页面</span></span><br><span class="line">        <span class="attr">imgs</span>: order</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 监听是否滚动到顶部</span></span><br><span class="line">    <span class="title function_">scrollToTop</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">scrollTop</span>: <span class="number">0</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 触摸事件</span></span><br><span class="line">    <span class="title function_">tap</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; order.<span class="property">length</span>; ++i) &#123;</span><br><span class="line">            <span class="comment">// this.data.toView此时是图片的id</span></span><br><span class="line">            <span class="keyword">if</span> (order[i].<span class="property">id</span> === <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">toView</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                    <span class="attr">toView</span>: order[i + <span class="number">1</span>].<span class="property">id</span>,</span><br><span class="line">                    <span class="attr">scrollTop</span>: (i + <span class="number">1</span>) * <span class="number">200</span></span><br><span class="line">                &#125;)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 触摸并拖拽事件</span></span><br><span class="line">    <span class="title function_">tapMove</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">            <span class="attr">scrollTop</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">scrollTop</span> + <span class="number">10</span></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>wxml文件参考代码</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/scrollView/scrollView.wxml--&gt;</span><br><span class="line">&lt;text&gt;pages/scrollView/scrollView.wxml&lt;/text&gt;</span><br><span class="line"></span><br><span class="line">&lt;scroll-view scroll-y=&quot;true&quot; style=&quot;height: 560rpx;&quot; scroll-into-view=&quot;&#123;&#123;toView&#125;&#125;&quot; scroll-top=&quot;&#123;&#123;scrollTop&#125;&#125;&quot;&gt;</span><br><span class="line">    &lt;block wx:for=&quot;&#123;&#123;imgs&#125;&#125;&quot; wx:key=&quot;*this&quot;&gt;</span><br><span class="line">        &lt;image src=&quot;&#123;&#123;item.url&#125;&#125;&quot; /&gt;</span><br><span class="line">    &lt;/block&gt;</span><br><span class="line">&lt;/scroll-view&gt;</span><br></pre></td></tr></table></figure><h2 id="3、表单组件"><a href="#3、表单组件" class="headerlink" title="3、表单组件"></a>3、表单组件</h2><p>小程序项目中但凡是涉及到表单的地方，都需要使用表单组件。表单组件的作用就是用于组成表单的。</p><p>注意点：</p><ul><li>这里面表单组件<strong>部分</strong>的标签继续沿用html的标签，与之前完全同名</li><li>组件标签的部分属性也与之前html属性一致，但是更多的是不一致的</li></ul><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/button.html">https://developers.weixin.qq.com/miniprogram/dev/component/button.html</a></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--pages/formComponent/form.wxml--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">text</span>&gt;</span>pages/formComponent/form.wxml<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 表单组件：按钮组件 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 常规按钮：底色灰白的，不易见，type值为default（可以不写） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>常规按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 主要按钮：绿色按钮，最常用的按钮 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span>&gt;</span>主要按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 警告按钮：底色灰色，但是字是红色 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;warn&quot;</span>&gt;</span>警告按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 按钮开放功能：打开授权，需要配合授权的回调函数，综合案例中再讲 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">open-type</span>=<span class="string">&quot;getUserInfo&quot;</span> <span class="attr">bindgetuserinfo</span>=<span class="string">&quot;getInfo&quot;</span>&gt;</span>授权<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 单选按钮组 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 由于单选按钮组中包含了多个redio，因此需要被包裹 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">radio-group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">radio</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>&gt;</span>男<span class="tag">&lt;/<span class="name">radio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">radio</span> <span class="attr">value</span>=<span class="string">&quot;2&quot;</span>&gt;</span>女<span class="tag">&lt;/<span class="name">radio</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">radio-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 复选框组 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 与单选按钮组类似，也需要被包裹 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">checkbox-group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">&quot;吃饭&quot;</span>&gt;</span>吃饭<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">&quot;睡觉&quot;</span>&gt;</span>睡觉<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">checkbox</span> <span class="attr">value</span>=<span class="string">&quot;打DD&quot;</span>&gt;</span>打DD<span class="tag">&lt;/<span class="name">checkbox</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">checkbox-group</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--表单组件的标签的样式是需要自己去调节设置的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">value</span>=<span class="string">&quot;zhangsan&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>提醒：按钮button组件有一个非常实用的属性<code>open-type</code>，后续可以通过该属性赋予按钮高级的功能（微信开放能力），例如：</p><ul><li>获取用户信息的时候</li><li>唤起其他App的时候<ul><li>不是任意app都可以唤起，只能唤起来源app</li></ul></li><li>获取用户手机号</li><li>….</li></ul><h2 id="4、-媒体组件"><a href="#4、-媒体组件" class="headerlink" title="4、 媒体组件"></a>4、 媒体组件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 页面部分</span></span><br><span class="line">&lt;camera device-position=<span class="string">&quot;back&quot;</span> flash=<span class="string">&quot;off&quot;</span> binderror=<span class="string">&quot;error&quot;</span> style=<span class="string">&quot;width: 100%; height: 300px;&quot;</span> bindscancode=<span class="string">&#x27;getscandata&#x27;</span>&gt;&lt;/camera&gt;</span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;takePhoto&quot;</span>&gt;</span>拍照<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">view</span>&gt;</span>预览<span class="tag">&lt;/<span class="name">view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">image</span> <span class="attr">mode</span>=<span class="string">&quot;widthFix&quot;</span> <span class="attr">src</span>=<span class="string">&quot;&#123;&#123;src&#125;&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span> </span><br><span class="line"></span><br><span class="line"><span class="comment">// 逻辑部分</span></span><br><span class="line"><span class="title function_">takePhoto</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> ctx = wx.<span class="title function_">createCameraContext</span>()</span><br><span class="line">    ctx.<span class="title function_">takePhoto</span>(&#123;</span><br><span class="line">      <span class="attr">quality</span>: <span class="string">&#x27;high&#x27;</span>,</span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res1</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res1);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">          <span class="attr">src</span>: res1.<span class="property">tempImagePath</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 将照片保存到手机相册中</span></span><br><span class="line">        wx.<span class="title function_">saveImageToPhotosAlbum</span>(&#123;</span><br><span class="line">          <span class="attr">filePath</span>:res1.<span class="property">tempImagePath</span>, </span><br><span class="line">          <span class="title function_">success</span>(<span class="params">res</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">           &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      </span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>video组件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;view class=&quot;page-body&quot;&gt;</span><br><span class="line">  &lt;view class=&quot;page-section tc&quot;&gt;</span><br><span class="line">    &lt;video </span><br><span class="line">      id=&quot;myVideo&quot; </span><br><span class="line">      src=&quot;http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&amp;bizid=1023&amp;hy=SH&amp;fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400&quot; </span><br><span class="line">      binderror=&quot;videoErrorCallback&quot; </span><br><span class="line">      danmu-list=&quot;&#123;&#123;danmuList&#125;&#125;&quot; </span><br><span class="line">      enable-danmu </span><br><span class="line">      danmu-btn </span><br><span class="line">      show-center-play-btn=&#x27;&#123;&#123;false&#125;&#125;&#x27; </span><br><span class="line">      show-play-btn=&quot;&#123;&#123;true&#125;&#125;&quot; </span><br><span class="line">      controls</span><br><span class="line">      picture-in-picture-mode=&quot;&#123;&#123;[&#x27;push&#x27;, &#x27;pop&#x27;]&#125;&#125;&quot;</span><br><span class="line">      bindenterpictureinpicture=&#x27;bindVideoEnterPictureInPicture&#x27;</span><br><span class="line">      bindleavepictureinpicture=&#x27;bindVideoLeavePictureInPicture&#x27;</span><br><span class="line">    &gt;&lt;/video&gt;</span><br><span class="line">    &lt;view style=&quot;margin: 30rpx auto&quot; class=&quot;weui-label&quot;&gt;弹幕内容&lt;/view&gt;</span><br><span class="line">    &lt;input bindblur=&quot;bindInputBlur&quot; class=&quot;weui-input&quot; type=&quot;text&quot; placeholder=&quot;在此处输入弹幕内容&quot; /&gt;</span><br><span class="line">    &lt;button style=&quot;margin: 30rpx auto&quot;  bindtap=&quot;bindSendDanmu&quot; class=&quot;page-body-button&quot; type=&quot;primary&quot; formType=&quot;submit&quot;&gt;发送弹幕&lt;/button&gt;</span><br><span class="line">    &lt;navigator style=&quot;margin: 30rpx auto&quot;  url=&quot;picture-in-picture&quot; hover-class=&quot;other-navigator-hover&quot;&gt;</span><br><span class="line">      &lt;button type=&quot;primary&quot; class=&quot;page-body-button&quot; bindtap=&quot;bindPlayVideo&quot;&gt;小窗模式&lt;/button&gt;</span><br><span class="line">    &lt;/navigator&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p>video.js</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">function getRandomColor() &#123;</span><br><span class="line">  const rgb = []</span><br><span class="line">  for (let i = 0; i &lt; 3; ++i) &#123;</span><br><span class="line">    let color = Math.floor(Math.random() * 256).toString(16)</span><br><span class="line">    color = color.length === 1 ? &#x27;0&#x27; + color : color</span><br><span class="line">    rgb.push(color)</span><br><span class="line">  &#125;</span><br><span class="line">  return &#x27;#&#x27; + rgb.join(&#x27;&#x27;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  onShareAppMessage() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      title: &#x27;video&#x27;,</span><br><span class="line">      path: &#x27;page/component/pages/video/video&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  onReady() &#123;</span><br><span class="line">    this.videoContext = wx.createVideoContext(&#x27;myVideo&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  onHide() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  inputValue: &#x27;&#x27;,</span><br><span class="line">  data: &#123;</span><br><span class="line">    src: &#x27;&#x27;,</span><br><span class="line">    danmuList:</span><br><span class="line">    [&#123;</span><br><span class="line">      text: &#x27;第 1s 出现的弹幕&#x27;,</span><br><span class="line">      color: &#x27;#ff0000&#x27;,</span><br><span class="line">      time: 1</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      text: &#x27;第 3s 出现的弹幕&#x27;,</span><br><span class="line">      color: &#x27;#ff00ff&#x27;,</span><br><span class="line">      time: 3</span><br><span class="line">    &#125;],</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  bindInputBlur(e) &#123;</span><br><span class="line">    this.inputValue = e.detail.value</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  bindButtonTap() &#123;</span><br><span class="line">    const that = this</span><br><span class="line">    wx.chooseVideo(&#123;</span><br><span class="line">      sourceType: [&#x27;album&#x27;, &#x27;camera&#x27;],</span><br><span class="line">      maxDuration: 60,</span><br><span class="line">      camera: [&#x27;front&#x27;, &#x27;back&#x27;],</span><br><span class="line">      success(res) &#123;</span><br><span class="line">        that.setData(&#123;</span><br><span class="line">          src: res.tempFilePath</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  bindVideoEnterPictureInPicture() &#123;</span><br><span class="line">    console.log(&#x27;进入小窗模式&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  bindVideoLeavePictureInPicture() &#123;</span><br><span class="line">    console.log(&#x27;退出小窗模式&#x27;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  bindPlayVideo() &#123;</span><br><span class="line">    console.log(&#x27;1&#x27;)</span><br><span class="line">    this.videoContext.play()</span><br><span class="line">  &#125;,</span><br><span class="line">  bindSendDanmu() &#123;</span><br><span class="line">    this.videoContext.sendDanmu(&#123;</span><br><span class="line">      text: this.inputValue,</span><br><span class="line">      color: getRandomColor()</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  videoErrorCallback(e) &#123;</span><br><span class="line">    console.log(&#x27;视频错误信息:&#x27;)</span><br><span class="line">    console.log(e.detail.errMsg)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="5、-地理定位组件"><a href="#5、-地理定位组件" class="headerlink" title="5、 地理定位组件"></a>5、 地理定位组件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 地图组件 --&gt;</span><br><span class="line">&lt;!-- <span class="language-xml"><span class="tag">&lt;<span class="name">map</span> <span class="attr">longitude</span>=<span class="string">&quot;&#123;&#123;long&#125;&#125;&quot;</span> <span class="attr">latitude</span>=<span class="string">&quot;&#123;&#123;lat&#125;&#125;&quot;</span> <span class="attr">scale</span>=<span class="string">&#x27;20&#x27;</span>&gt;</span><span class="tag">&lt;/<span class="name">map</span>&gt;</span></span> --&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line"><span class="comment">// 在该位置获取当前位置的经纬度</span></span><br><span class="line"> wx.<span class="title function_">getLocation</span>(&#123;</span><br><span class="line">   <span class="attr">type</span>: <span class="string">&#x27;wgs84&#x27;</span>,</span><br><span class="line">   <span class="attr">success</span>: <span class="function">(<span class="params">res</span>)=&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">     <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">       <span class="attr">long</span>: res.<span class="property">longitude</span>,</span><br><span class="line">       <span class="attr">lat</span>:res.<span class="property">latitude</span></span><br><span class="line">     &#125;)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>app.json</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&quot;permission&quot;: &#123;</span><br><span class="line">  &quot;scope.userLocation&quot;: &#123;</span><br><span class="line">    &quot;desc&quot;: &quot;你的位置信息将用于小程序位置接口的效果展示&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br><span class="line">&quot;requiredPrivateInfos&quot;: [&quot;getLocation&quot;],</span><br></pre></td></tr></table></figure><h1 id="十一、自定义组件"><a href="#十一、自定义组件" class="headerlink" title="十一、自定义组件"></a>十一、自定义组件</h1><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/">https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/</a></p><p>开发者可以将页面内的功能模块抽象成自定义组件（思想与vue和react一样），以便在不同的页面中<strong>重复使用</strong>；也可以将复杂的页面拆分成多个低耦合的模块，有助于代码维护。自定义组件在使用时与基础组件非常相似。</p><h2 id="1-组件传参"><a href="#1-组件传参" class="headerlink" title="1. 组件传参"></a>1. 组件传参</h2><p>步骤：</p><ul><li><p>1.首先创建组件， 新建文件创建组件，右键创建文件夹，然后新建组件生成相应4个文件同页面文件一样。</p></li><li><p>2.在组件js文件中，定义组件得属性，如下图tag,且在页面中输出变量tag如下</p><p><img src="https://i.loli.net/2021/10/15/QrLB5FfKkqp3jnl.png" alt="image-20211015182708911"></p></li><li><p>3.在其他页面使用组件，首先需要在该页面得json配置文件中引入该组件如下图</p></li><li><p>4.将引入得组件名放到对应使用位置，父组件添加属性，给子组件传递数据，子组<br>件通过 properties 接收，如此处tag 属性，注意：传递属性名和接受得属性名<br>必须一致。</p><p><img src="https://i.loli.net/2021/10/15/YFcSBXwPjArsDto.png" alt="image-20211015182826480"></p></li><li><p>5.子组件向父组件传递参数一般通过事件传递。</p></li><li><p>6.子组件绑定事件，父组件页面bind:子组件事件名。</p></li></ul><p><img src="https://i.loli.net/2021/10/15/8iUQbKBaLnfWFCH.png" alt="image-20211015182956059"></p><h2 id="2-组件生命周期"><a href="#2-组件生命周期" class="headerlink" title="2. 组件生命周期"></a>2. 组件生命周期</h2><p>1.组件的生命周期，指的是组件自身的一些函数，这些函数在特殊的时间点或遇到一些特殊的框架事件时被自动触发。</p><ul><li>组件实例刚刚被创建好时， <code>created</code> 生命周期被触发。此时，组件数据 <code>this.data</code> 就是在 <code>Component</code> 构造器中定义的数据 <code>data</code> 。 <strong>此时还不能调用 <code>setData</code> 。</strong> 通常情况下，这个生命周期只应该用于给组件 <code>this</code> 添加一些自定义属性字段。</li><li>在组件完全初始化完毕、进入页面节点树后， <code>attached</code> 生命周期被触发。此时， <code>this.data</code> 已被初始化为组件的当前值。这个生命周期很有用，绝大多数初始化工作可以在这个时机进行。</li><li>在组件离开页面节点树后， <code>detached</code> 生命周期被触发。退出一个页面时，如果组件还在页面节点树中，则 <code>detached</code> 会被触发。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Component</span>(&#123;</span><br><span class="line">  <span class="attr">lifetimes</span>: &#123;</span><br><span class="line">    <span class="attr">attached</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 在组件实例进入页面节点树时执行</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">detached</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 在组件实例被从页面节点树移除时执行</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 以下是旧式的定义方式，可以保持对 &lt;2.2.3 版本基础库的兼容</span></span><br><span class="line">  <span class="attr">attached</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 在组件实例进入页面节点树时执行</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">detached</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 在组件实例被从页面节点树移除时执行</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>分享:引入第三方组件vant</p><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_67841039/article/details/125828689">https://blog.csdn.net/m0_67841039/article/details/125828689</a></p><p>app.json</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;style&quot;: &quot;v2&quot;,  去掉</span><br></pre></td></tr></table></figure><h1 id="十二、导航方式"><a href="#十二、导航方式" class="headerlink" title="十二、导航方式"></a>十二、导航方式</h1><p>小程序的路由章节并不是需要学习怎么定义路由，因为路由已经在<code>app.json</code>全局配置文件中声明好了。在本章节我们需要掌握的就是如何实现<code>page</code>的切换。</p><p><code>page</code>的切换小程序提供了两种实现方式，一种是通过组件来实现（声明式导航），另外一种是通过api实现（编程式导航）</p><h2 id="1、基于组件"><a href="#1、基于组件" class="headerlink" title="1、基于组件"></a>1、基于组件</h2><p>基于组件式的导航方式其实就是之前的声明式导航。</p><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html">https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html</a></p><p>组件：navigator</p><p>该组件的属性比较多，需要注意下<code>open-type</code>，这里属性值稍微常用一点的就是<code>switchTab</code>，其是用来切换tabBar的</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/navigator/navigator.wxml--&gt;</span><br><span class="line">&lt;text&gt;pages/navigator/navigator.wxml&lt;/text&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- </span><br><span class="line">    声明式导航：基于组件的导航方式</span><br><span class="line">    组件：navigator</span><br><span class="line">    可以将其看作是html的a标签</span><br><span class="line">    url属性：去的地址，地址要带“/”</span><br><span class="line"> --&gt;</span><br><span class="line">&lt;navigator url=&quot;/pages/index/index&quot;&gt;去首页&lt;/navigator&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 声明式导航也支持传递参数 --&gt;</span><br><span class="line">&lt;navigator url=&quot;/pages/index/index?id=1&amp;age=22&quot;&gt;带参数去首页&lt;/navigator&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 菜单的切换 --&gt;</span><br><span class="line">&lt;!-- 无效方式 --&gt;</span><br><span class="line">&lt;navigator url=&quot;/pages/scrollView/scrollView&quot;&gt;尝试切菜单&lt;/navigator&gt;</span><br><span class="line">&lt;!-- 可用 --&gt;</span><br><span class="line">&lt;navigator url=&quot;/pages/logs/logs&quot; open-type=&quot;switchTab&quot;&gt;尝试切菜单&lt;/navigator&gt;</span><br></pre></td></tr></table></figure><p>跳转去其他页面的时候，如果带参，则接收参数的页面需要在<code>onLoad</code>生命周期函数中接收形参<code>options</code>，其是一个普通对象，里面存放着传递过来的数据。</p><p>navigateTo : 跳转非tabbar页面，不关闭当前页面</p><p>redirectTo : 关闭当前当前页面，跳转到其它页面</p><p>switchTab 跳转到其他页面，关闭非tabbar页面</p><p>reLaunch 关闭所有页面，打开到应用内的某个页面</p><p><strong>open-type 的合法值</strong></p><table><thead><tr><th align="left">值</th><th align="left">说明</th><th align="left">最低版本</th></tr></thead><tbody><tr><td align="left">navigate</td><td align="left">对应 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateTo.html">wx.navigateTo</a> 或 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/miniprogram-navigate/wx.navigateToMiniProgram.html">wx.navigateToMiniProgram</a> 的功能</td><td align="left"></td></tr><tr><td align="left">redirect</td><td align="left">对应 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.redirectTo.html">wx.redirectTo</a> 的功能</td><td align="left"></td></tr><tr><td align="left">switchTab</td><td align="left">对应 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.switchTab.html">wx.switchTab</a> 的功能</td><td align="left"></td></tr><tr><td align="left">reLaunch</td><td align="left">对应 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.reLaunch.html">wx.reLaunch</a> 的功能</td><td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.1.0</a></td></tr><tr><td align="left">navigateBack</td><td align="left">对应 <a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.navigateBack.html">wx.navigateBack</a> 的功能</td><td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">1.1.0</a></td></tr><tr><td align="left">exit</td><td align="left">退出小程序，<code>target=&quot;miniProgram&quot;</code>时生效</td><td align="left"><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html">2.1.0</a></td></tr></tbody></table><h2 id="2、基于Api"><a href="#2、基于Api" class="headerlink" title="2、基于Api"></a>2、基于Api</h2><p>基于Api的导航实质上就是基于事件+编程的方式来实现导航。</p><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.switchTab.html">https://developers.weixin.qq.com/miniprogram/dev/api/route/wx.switchTab.html</a></p><p>具体的api可以参考文档，例如演示2个常用的api：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 基于Api形式的导航实现 --&gt;</span><br><span class="line">&lt;view bindtap=&quot;tapHandler1&quot;&gt;去tab中的index&lt;/view&gt;</span><br><span class="line">&lt;view bindtap=&quot;tapHandler2&quot;&gt;去nav1&lt;/view&gt;</span><br><span class="line">&lt;view bindtap=&quot;tapHandler3&quot;&gt;去nav1&lt;/view&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 编程式导航方式</span></span><br><span class="line"><span class="comment">// wx.switchTab  等于  navigator + open-type=switchTab</span></span><br><span class="line"><span class="attr">tapHandler1</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    wx.<span class="title function_">switchTab</span>(&#123;<span class="attr">url</span>: <span class="string">&quot;/pages/index/index&quot;</span>&#125;);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// wx.navigateTo  等于  navigator</span></span><br><span class="line"><span class="comment">// navigateTo，保留当前页面（目标页面左上角出现“返回”按钮），去应用内其它页面，但不能是tabbar中页面</span></span><br><span class="line"><span class="attr">tapHandler2</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;<span class="attr">url</span>: <span class="string">&quot;/pages/nav1/nav1&quot;</span>&#125;);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// wx.redirectTo  等于  navigator + open-type=redirect</span></span><br><span class="line"><span class="comment">// redirectTo，不保留当前页面（目标页面左上角出现“首页”按钮），去应用内其它页面，但不能是tabbar中页面</span></span><br><span class="line"><span class="attr">tapHandler3</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    wx.<span class="title function_">redirectTo</span>(&#123;<span class="attr">url</span>: <span class="string">&quot;/pages/nav1/nav1&quot;</span>&#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h1 id="十三、界面交互方法"><a href="#十三、界面交互方法" class="headerlink" title="十三、界面交互方法"></a>十三、界面交互方法</h1><h2 id="1、显示消息提示框"><a href="#1、显示消息提示框" class="headerlink" title="1、显示消息提示框"></a>1、显示消息提示框</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">showToast</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;成功&#x27;</span>,</span><br><span class="line">  <span class="attr">icon</span>: <span class="string">&#x27;success&#x27;</span>,</span><br><span class="line">  <span class="attr">duration</span>: <span class="number">2000</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h2 id="2、显示模态对话框"><a href="#2、显示模态对话框" class="headerlink" title="2、显示模态对话框"></a>2、显示模态对话框</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">showModal</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;提示&#x27;</span>,</span><br><span class="line">  <span class="attr">content</span>: <span class="string">&#x27;这是一个模态弹窗&#x27;</span>,</span><br><span class="line">  success (res) &#123;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="property">confirm</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;用户点击确定&#x27;</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (res.<span class="property">cancel</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;用户点击取消&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>3、显示 loading 提示框</p><p>注意：需主动调用 wx.hideLoading 才能关闭提示框</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">  <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span>,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">&#125;, <span class="number">2000</span>)</span><br></pre></td></tr></table></figure><p>云开发(serveless技术) 云数据库和云函数</p><h1 id="十四、网络请求"><a href="#十四、网络请求" class="headerlink" title="十四、网络请求"></a>十四、网络请求</h1><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html">https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html</a></p><blockquote><p>请注意：小程序<strong>只支持<code>https</code>和<code>wss（WebSocket，其具备ws协议与wss协议）</code>协议</strong>的网络请求。但是允许开发者在<strong>开发环境下</strong>使用<code>http</code>请求，不过在最终上线时<strong>必须</strong>要修改为小程序支持的协议类型。</p></blockquote><h2 id="1、网络请求的相关设置"><a href="#1、网络请求的相关设置" class="headerlink" title="1、网络请求的相关设置"></a>1、网络请求的相关设置</h2><p>虽然小程序<strong>只支持<code>https</code>和<code>wss</code>协议</strong>的网络请求。但是允许开发者在开发环境下使用<code>http</code>请求。如果需要在<strong>开发环境下</strong>使用<code>http</code>协议进行开发测试并且不对域名合法性进行校验，请记得开启支持：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/a8126dbd98b557a7587f45eb3be3fc27e8e8df94.png?sign=53b59a273fb76b8536bbdcbd7d6203e8&t=5fb3aa7e"></p><p>最终上线时，需要有<code>https</code>的接口服务，并且需要在小程序官方后台中设置接口域名（为了安全，添加域名白名单），设置路径：<strong>小程序管理后台 &#x2F; 开发 &#x2F; 开发设置 &#x2F; 服务器域名</strong>。如果条件允许，建议尽量在开发时就使用符合要求的域名配置而不是等到上线的时候再返工。</p><blockquote><p>如果使用的测试号，请在测试号管理页面添加白名单。</p></blockquote><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/257dfb65449259e4563e16e409eed63cf3e4feaf.png?sign=c94881b7801e0b35114c9971395faec6&t=5fb3ab95"></p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/690a9c8a5fa01c9bf547ffc877526f2be061e4ff.png?sign=310115b582641713177fb70b391ad360&t=5fb3af2f"></p><p>域名可以使用给定测试域名：</p><blockquote><ul><li><a target="_blank" rel="noopener" href="https://api.i-lynn.cn/">https://api.i-lynn.cn</a></li><li><a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/">https://mpapi.iynn.cn</a></li></ul></blockquote><h2 id="2、发起网络请求"><a href="#2、发起网络请求" class="headerlink" title="2、发起网络请求"></a>2、发起网络请求</h2><p>在小程序的<code>wx</code>对象中，其已经提供了网络请求方法。</p><p>语法：wx.request(请求参数的对象)</p><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html">https://developers.weixin.qq.com/miniprogram/dev/api/network/request/wx.request.html</a></p><p><strong>示例代码</strong></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;test.php&#x27;</span>, <span class="comment">//仅为示例，并非真实的接口地址</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">x</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">y</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">    <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> <span class="comment">// 默认值</span></span><br><span class="line">    &#125;,</span><br><span class="line">    success (res) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>注：在发起请求之前，需要在app.json文件中设置request请求的超时时间以防止网络堵塞导致程序卡死，时间单位为毫秒：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;networkTimeout&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"><span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="number">10000</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></blockquote><p>wx.request()的方法返回的对象信息包含如下几个属性：</p><ul><li>cookies：返回的cookies</li><li>data：响应体</li><li>header：响应头</li><li>statusCode：http状态码</li><li>errMsg：错误信息</li></ul><p>例如：点击按钮发送一个网络请求请求数据并循环渲染</p><p><strong>wxml代码</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/request/request.wxml--&gt;</span><br><span class="line">&lt;text&gt;pages/request/request.wxml&lt;/text&gt;</span><br><span class="line"></span><br><span class="line">&lt;button type=&quot;primary&quot; bindtap=&quot;send&quot;&gt;发送请求&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;block wx:for=&quot;&#123;&#123;data&#125;&#125;&quot; wx:key=&quot;index&quot;&gt;</span><br><span class="line">    &lt;view&gt;地区id：&#123;&#123;item.id&#125;&#125;，地区名：&#123;&#123;item.name&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;/block&gt;</span><br></pre></td></tr></table></figure><p><strong>js代码</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">data</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 发送网络请求</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="title function_">send</span>(<span class="params"></span>) &#123;</span><br><span class="line">        wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">            <span class="comment">// 请求地址</span></span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;https://api.i-lynn.cn/area&#x27;</span>,</span><br><span class="line">            <span class="comment">// 请求方式</span></span><br><span class="line">            <span class="attr">method</span>: <span class="string">&quot;GET&quot;</span>,</span><br><span class="line">            <span class="comment">// 请求参数</span></span><br><span class="line">            <span class="attr">data</span>: &#123;</span><br><span class="line">                <span class="attr">id</span>: <span class="number">1</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 成功请求的回调</span></span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                    <span class="attr">data</span>: res.<span class="property">data</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>请求的封装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const http=(url,method,data)=&gt;&#123;</span><br><span class="line">    return new Promise((reslove,reject)=&gt;&#123;</span><br><span class="line">      wx.request(&#123;</span><br><span class="line">        url,</span><br><span class="line">        data,</span><br><span class="line">        method,</span><br><span class="line">        success: (result) =&gt; &#123;</span><br><span class="line">            reslove(result)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3、缓存"><a href="#3、缓存" class="headerlink" title="3、缓存"></a>3、缓存</h2><p>文档地址：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/storage/wx.setStorage.html">https://developers.weixin.qq.com/miniprogram/dev/api/storage/wx.setStorage.html</a></p><p>小程序是有缓存的，但是它缓存没有过期时间，单个key允许存储的最大数据长度为1MB，所有数据存储上限为10MB。如果缓存达到了上限，清除缓存，清除缓存机制：最久未被使用。</p><p>例如：在wxml结构中设置2个按钮，分别用于设置和获取缓存的数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 设置缓存 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;setCache&quot;</span>&gt;</span>设置<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">&lt;!-- 获取缓存 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> <span class="attr">bindtap</span>=<span class="string">&quot;getCache&quot;</span>&gt;</span>获取<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="attr">setCache</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 同步存储</span></span><br><span class="line">	wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>)</span><br><span class="line">    <span class="comment">// 异步存储</span></span><br><span class="line">    wx.<span class="title function_">setStorage</span>(&#123;</span><br><span class="line">      <span class="attr">key</span>:<span class="string">&quot;key&quot;</span>,</span><br><span class="line">      <span class="attr">data</span>:<span class="string">&quot;value&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">    </span><br><span class="line"><span class="attr">getCache</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 同步获取</span></span><br><span class="line">	<span class="keyword">var</span> value = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;key&#x27;</span>)</span><br><span class="line">    <span class="comment">// 异步获取</span></span><br><span class="line">    wx.<span class="title function_">getStorage</span>(&#123;</span><br><span class="line">      <span class="attr">key</span>: <span class="string">&#x27;key&#x27;</span>,</span><br><span class="line">      success (res) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><strong>重要的数据不要放在小程序缓存中。</strong></p><p>需要注意，获取缓存数据的方法<code>wx.getStorage</code>方法为异步方法，在获取的时候要么加<code>.then</code>进行处理，要么加<code>async + await</code>进行处理。（推荐：再或者就是在方法名后面加上<code>Sync</code>来使用其同步的方法）<strong>在小程序开发工具中默认是不允许使用async和await的，如有使用需求，请开启增强编译功能</strong>，如图：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2021/06/09688d92b7b8bd3c1d1d05d72c206a067ea59532.png?sign=7b0373a3312964264fe95142655ac53a&t=60c072a2"></p><h1 id="十五、综合案例"><a href="#十五、综合案例" class="headerlink" title="十五、综合案例"></a>十五、综合案例</h1><p>目标：实现一个简易的新闻小程序，包括如下功能：</p><ul><li><strong>热点新闻</strong></li><li><strong>搜索</strong></li><li><strong>新闻列表-加载更多</strong></li><li><strong>新闻详情</strong></li><li><strong>实现登录</strong></li></ul><h2 id="效果演示"><a href="#效果演示" class="headerlink" title="效果演示"></a><strong>效果演示</strong></h2><p><img src="https://i.loli.net/2021/11/09/lWfBPXdVqQrbot6.png" alt="image-20211109220019102"></p><p>​ （新闻页）</p><p><img src="https://i.loli.net/2021/11/08/4nNhCayd6HOzQgY.png" alt="详情页"></p><p>​ （详情页）</p><p><img src="https://i.loli.net/2021/11/08/BtcEbM7j9q3vr6m.png" alt="我的"></p><p>​ （我的页）</p><h2 id="1、封装"><a href="#1、封装" class="headerlink" title="1、封装"></a>1、封装</h2><p>本案例需要使用的地址信息参考如下（此处仅约定地址，更为详尽的参数信息见对应功能的接口介绍）：</p><p><strong>基础地址：</strong><a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1">https://mpapi.iynn.cn/api/v1</a></p><p><strong>各功能地址：</strong></p><ul><li><p>个人中心（我的）</p><ul><li>登录：login</li><li>授权：auth</li><li>获取个人信息：user</li><li>修改个人信息：user</li><li>获取记录<ul><li>浏览：record</li><li>收藏：fav</li><li>点赞：like</li></ul></li></ul></li><li><p>新闻</p><ul><li><p>新闻列表：news</p></li><li><p>新闻搜索：news&#x2F;search</p></li><li><p>热点新闻：news&#x2F;hot</p></li><li><p>新闻详情：news&#x2F;:id</p></li><li><p>添加记录</p><ul><li>浏览：addRecord</li><li>收藏：addFav</li><li>点赞：addLike</li></ul></li></ul></li></ul><p>在小程序开发的环节中，也需要应用模块化的思想，拆成3个部分即可：</p><ul><li>请求地址的封装吗，形成地址配置文件</li><li>请求封装</li><li>模型封装（处理业务，将业务独立，需要时候的时候在页面的js文件中导入使用即可）</li></ul><h3 id="1-1、请求封装"><a href="#1-1、请求封装" class="headerlink" title="1.1、请求封装"></a>1.1、请求封装</h3><p>地址配置文件：utils&#x2F;request.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">ajax</span> = (<span class="params">url,method,data</span>)=&gt;&#123;</span><br><span class="line">  <span class="comment">// 开始转圈圈</span></span><br><span class="line">    wx.<span class="title function_">showLoading</span>(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;加载中...&#x27;</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">      wx.<span class="title function_">request</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: url, <span class="comment">//仅为示例，并非真实的接口地址</span></span><br><span class="line">        <span class="attr">data</span>: data,</span><br><span class="line">        <span class="attr">method</span>:method,</span><br><span class="line">        <span class="attr">header</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span> <span class="comment">// 默认值</span></span><br><span class="line">        &#125;,</span><br><span class="line">        success (res) &#123;</span><br><span class="line">          <span class="comment">// console.log(res.data)</span></span><br><span class="line">          <span class="title function_">resolve</span>(res.<span class="property">data</span>)</span><br><span class="line">           <span class="comment">// 关闭转圈圈</span></span><br><span class="line">           wx.<span class="title function_">hideLoading</span>()</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">fail</span>(<span class="params">err</span>)&#123;</span><br><span class="line">          <span class="title function_">reject</span>(err)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ajax</span><br></pre></td></tr></table></figure><h3 id="1-2、接口封装"><a href="#1-2、接口封装" class="headerlink" title="1.2、接口封装"></a>1.2、接口封装</h3><p>请求封装的文件：utils&#x2F;http.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ajax <span class="keyword">from</span> <span class="string">&#x27;./request&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 公共的基础域名地址</span></span><br><span class="line"><span class="keyword">const</span> baseUrl= <span class="string">&#x27;https://mpapi.iynn.cn/api/v1&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//所有的请求集合</span></span><br><span class="line"><span class="comment">// 新闻列表</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">newList</span>(<span class="params">params</span>)&#123;</span><br><span class="line">   <span class="keyword">return</span>  <span class="title function_">ajax</span>(baseUrl+<span class="string">&#x27;/news&#x27;</span>,<span class="string">&#x27;get&#x27;</span>,params)</span><br><span class="line">&#125; </span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="2、功能实现"><a href="#2、功能实现" class="headerlink" title="2、功能实现"></a>2、功能实现</h2><h3 id="2-1、接口说明"><a href="#2-1、接口说明" class="headerlink" title="2.1、接口说明"></a>2.1、接口说明</h3><ul><li>新闻搜索<ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/news/search">https://mpapi.iynn.cn/api/v1/news/search</a></li><li>请求类型：get</li><li>参数：<ul><li>keyword：搜索关键词</li></ul></li><li>请求示例：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/news/search?keyword=11">https://mpapi.iynn.cn/api/v1/news/search?keyword=11</a></li></ul></li><li>热点新闻<ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/news/hot">https://mpapi.iynn.cn/api/v1/news/hot</a></li><li>请求类型：get</li><li>参数：<ul><li>无</li></ul></li></ul></li><li>新闻列表<ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/news">https://mpapi.iynn.cn/api/v1/news</a></li><li>请求类型：get</li><li>参数：<ul><li>page：分页页码，可选参数，默认为1</li></ul></li><li>请求示例：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/news?page=1">https://mpapi.iynn.cn/api/v1/news?page=1</a></li></ul></li><li>新闻详情<ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/news">https://mpapi.iynn.cn/api/v1/news</a></li><li>请求类型：get</li><li>参数：<ul><li>id：新闻id，该地址为地址参数</li></ul></li><li>请求示例：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/news/12">https://mpapi.iynn.cn/api/v1/news/12</a></li></ul></li><li>用户登录，快速登录，依据openid<ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/login">https://mpapi.iynn.cn/api/v1/login</a></li><li>请求类型：post</li><li>参数：<ul><li>code：必须，<code>wx.login</code>接口返回的code码，用于换取openid</li><li>appid：必须，小程序appid</li><li>appsecret：必须，小程序appsecret</li></ul></li></ul></li><li>记录访问记录<ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/addRecord">https://mpapi.iynn.cn/api/v1/addRecord</a></li><li>请求类型：post</li><li>参数：<ul><li>user_id：必填，用户的id</li><li>article_id：必填，文章id</li></ul></li></ul></li></ul><h3 id="2-2、新闻页面"><a href="#2-2、新闻页面" class="headerlink" title="2.2、新闻页面"></a>2.2、新闻页面</h3><p>实现的功能：</p><ul><li>搜索框</li><li>轮播图</li><li>新闻列表<ul><li>加载更多</li></ul></li><li>新闻详情展示<ul><li>新闻基本信息</li><li>用户访问统计（获取用户标识符openid）</li></ul></li></ul><p>需求1：实现搜索框的展示和搜索功能</p><p>搜索框的排版可以参考别人已经写好的代码：<a target="_blank" rel="noopener" href="https://www.jb51.net/article/165269.htm">https://www.jb51.net/article/165269.htm</a></p><blockquote><p>小程序的input框的回车事件，其实就是手机端的收入法弹出后按键上的“搜索”按键，对应的事件是：bindconfirm</p></blockquote><p>搜索框结构代码：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 搜索框 --&gt;</span><br><span class="line">&lt;view class=&quot;weui-search-bar&quot;&gt;</span><br><span class="line">    &lt;view class=&quot;weui-search-bar__form&quot;&gt;</span><br><span class="line">        &lt;!--点击之后，出现input框 --&gt;</span><br><span class="line">        &lt;view class=&quot;weui-search-bar__box&quot;&gt;</span><br><span class="line">            &lt;icon class=&quot;weui-icon-search_in-box&quot; type=&quot;search&quot; size=&quot;14&quot;&gt;&lt;/icon&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; class=&quot;weui-search-bar__input&quot; placeholder=&quot;搜索&quot; value=&quot;&#123;&#123;inputVal&#125;&#125;&quot;</span><br><span class="line">                   focus=&quot;&#123;&#123;inputShowed&#125;&#125;&quot; bindinput=&quot;inputTyping&quot; bindconfirm=&quot;search&quot; /&gt;</span><br><span class="line">            &lt;!--输入款字数大于0，则显示清除按钮 --&gt;</span><br><span class="line">            &lt;view class=&quot;weui-icon-clear&quot; wx:if=&quot;&#123;&#123;inputVal.length &gt; 0&#125;&#125;&quot; bindtap=&quot;clearInput&quot;&gt;</span><br><span class="line">                &lt;icon type=&quot;clear&quot; size=&quot;14&quot;&gt;&lt;/icon&gt;</span><br><span class="line">            &lt;/view&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">        &lt;!--没点击之前，只是一些文字和图标 --&gt;</span><br><span class="line">        &lt;label class=&quot;weui-search-bar__label&quot; hidden=&quot;&#123;&#123;inputShowed&#125;&#125;&quot; bindtap=&quot;showInput&quot;&gt;</span><br><span class="line">            &lt;icon class=&quot;weui-icon-search&quot; type=&quot;search&quot; size=&quot;14&quot;&gt;&lt;/icon&gt;</span><br><span class="line">            &lt;view class=&quot;weui-search-bar__text&quot;&gt;搜索&lt;/view&gt;</span><br><span class="line">        &lt;/label&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">    &lt;!--动态出现的“取消”键 --&gt;</span><br><span class="line">    &lt;view class=&quot;weui-search-bar__cancel-btn&quot; hidden=&quot;&#123;&#123;!inputShowed&#125;&#125;&quot; bindtap=&quot;hideInput&quot;&gt;取消&lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p>逻辑代码：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 三方搜索框方法</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="attr">showInput</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">inputShowed</span>: <span class="literal">true</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">hideInput</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">inputVal</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">inputShowed</span>: <span class="literal">false</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">clearInput</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">inputVal</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">inputTyping</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">    <span class="comment">//搜索数据</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">        <span class="attr">inputVal</span>: e.<span class="property">detail</span>.<span class="property">value</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 搜索输入框的确认事件</span></span><br><span class="line"><span class="attr">search</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 思路：获取搜索框中的值，带着值去搜索页面，交给搜索页面去发送ajax获取对应的结果</span></span><br><span class="line">    <span class="keyword">let</span> keyword = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">inputVal</span></span><br><span class="line">    <span class="comment">// 跳转到搜索页面</span></span><br><span class="line">    wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;/pages/search/search?keyword=&#x27;</span> + keyword,</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>样式代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/index/index.wxss */</span></span><br><span class="line"><span class="selector-class">.weui-search-bar</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-box;</span><br><span class="line">    <span class="attribute">display</span>: -webkit-flex;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#EFEFF4</span>;</span><br><span class="line">    <span class="attribute">border-top</span>: <span class="number">1</span>rpx solid <span class="number">#D7D6DC</span>;</span><br><span class="line">    <span class="attribute">border-bottom</span>: <span class="number">1</span>rpx solid <span class="number">#D7D6DC</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weui-icon-search</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: inherit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weui-icon-search_in-box</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">7px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weui-search-bar__text</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weui-search-bar__form</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    -webkit-box-<span class="attribute">flex</span>: <span class="number">1</span>;</span><br><span class="line">    -webkit-<span class="attribute">flex</span>: auto;</span><br><span class="line">    <span class="attribute">flex</span>: auto;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1</span>rpx solid <span class="number">#E6E6EA</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weui-search-bar__box</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weui-search-bar__input</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weui-icon-clear</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">7px</span> <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weui-search-bar__label</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#9B9B9B</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">28px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.weui-search-bar__cancel-btn</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#09BB07</span>;</span><br><span class="line">    <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">30</span>rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需求2：轮播图的实现</p><p>在实现轮播图的时候需要注意俩个细节：</p><ul><li>点击轮播图后需要去往详情页面</li><li>轮播图需要显示与之对应的新闻标题</li></ul><p>页面结构：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 轮播图 --&gt;</span><br><span class="line">&lt;view&gt;</span><br><span class="line">    &lt;swiper indicator-dots=&quot;&#123;&#123;indicatorDots&#125;&#125;&quot; autoplay=&quot;&#123;&#123;autoplay&#125;&#125;&quot; interval=&quot;&#123;&#123;interval&#125;&#125;&quot;</span><br><span class="line">            duration=&quot;&#123;&#123;duration&#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;block wx:for=&quot;&#123;&#123;hotNews&#125;&#125;&quot; wx:key=&quot;index&quot;&gt;</span><br><span class="line">            &lt;!-- 点击轮播图跳转到详情页面 --&gt;</span><br><span class="line">            &lt;navigator url=&quot;/pages/detail/detail?id=&#123;&#123;item.id&#125;&#125;&quot;&gt;</span><br><span class="line">                &lt;swiper-item&gt;</span><br><span class="line">                    &lt;!-- 使用image组件展示图片 --&gt;</span><br><span class="line">                    &lt;image src=&quot;&#123;&#123;item.pic&#125;&#125;&quot; style=&quot;height:150px;&quot; /&gt;</span><br><span class="line">                    &lt;!-- 轮播图对应的新闻标题 --&gt;</span><br><span class="line">                    &lt;view class=&quot;title&quot;&gt;&#123;&#123;item.title&#125;&#125;&lt;/view&gt;</span><br><span class="line">                &lt;/swiper-item&gt;</span><br><span class="line">            &lt;/navigator&gt;</span><br><span class="line">        &lt;/block&gt;</span><br><span class="line">    &lt;/swiper&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p>逻辑部分：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/index/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    getSearchResult,</span><br><span class="line">    getHotNews,</span><br><span class="line">    getNewsList</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;../../models/news_model&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">indicatorDots</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">vertical</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">autoplay</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">interval</span>: <span class="number">2000</span>,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">500</span>,</span><br><span class="line">        <span class="comment">// 存放热点新闻的，swiper的数组</span></span><br><span class="line">        <span class="attr">hotNews</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="comment">// 获取热点新闻</span></span><br><span class="line">        <span class="title function_">getHotNews</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 将数据保存</span></span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">status</span> === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                    <span class="attr">hotNews</span>: res.<span class="property">data</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>样式部分：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* pages/index/index.wxss */</span></span><br><span class="line"><span class="comment">/* 轮播图标题的样式 */</span></span><br><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FFFFFF</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.3</span>);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需求3：实现新闻列表，及加载更多</p><p>页面结构：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 新闻列表 --&gt;</span><br><span class="line">&lt;view style=&quot;margin-top: 8rpx;&quot;&gt;</span><br><span class="line">    &lt;!-- 每个view就是一个记录 --&gt;</span><br><span class="line">    &lt;view wx:for=&quot;&#123;&#123;newsList&#125;&#125;&quot; wx:key=&quot;index&quot; style=&quot;margin-left: 5rpx;display:flex;&quot; bindtap=&quot;goto&quot; data-id=&quot;&#123;&#123;item.id&#125;&#125;&quot;&gt;</span><br><span class="line">        &lt;!-- 新闻图片 --&gt;</span><br><span class="line">        &lt;view style=&quot;margin-right:10rpx;&quot;&gt;</span><br><span class="line">            &lt;image src=&quot;&#123;&#123;item.pic&#125;&#125;&quot; style=&quot;width: 330rpx;height:220rpx;&quot; /&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">        &lt;!-- 新闻的文字相关 --&gt;</span><br><span class="line">        &lt;!-- 导入wxs模块处理过长的字符串内容 --&gt;</span><br><span class="line">        &lt;wxs src=&quot;/utils/common.wxs&quot; module=&quot;tool&quot;&gt;&lt;/wxs&gt;</span><br><span class="line">        &lt;view style=&quot;margin-right:5rpx;font-size: 13px;&quot;&gt;</span><br><span class="line">            &lt;view&gt;&#123;&#123;tool.jq(item.title,11)&#125;&#125;&lt;/view&gt;</span><br><span class="line">            &lt;view style=&quot;color:#999d9c&quot;&gt;&#123;&#123;tool.jq(item.desn,37)&#125;&#125;&lt;/view&gt;</span><br><span class="line">            &lt;view style=&quot;color:#d1c7b7&quot;&gt;&#123;&#123;item.author&#125;&#125;&lt;/view&gt;</span><br><span class="line">        &lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 加载完毕的提示 --&gt;</span><br><span class="line">&lt;view style=&quot;text-align:center;margin-top:20rpx;margin-bottom:20rpx;color:grey;&quot;&gt;&#123;&#123;over&#125;&#125;&lt;/view&gt;</span><br></pre></td></tr></table></figure><p>逻辑部分：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/index/index.js</span></span><br><span class="line"><span class="comment">// 导入模型中的方法（根据需要）</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    getSearchResult,</span><br><span class="line">    getHotNews,</span><br><span class="line">    getNewsList</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;../../models/news_model&quot;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">indicatorDots</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">vertical</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">autoplay</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">interval</span>: <span class="number">2000</span>,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">500</span>,</span><br><span class="line">        <span class="comment">// 存放热点新闻的，swiper的数组</span></span><br><span class="line">        <span class="attr">hotNews</span>: [],</span><br><span class="line">        <span class="comment">// 加载页码</span></span><br><span class="line">        <span class="attr">page</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="comment">// 新闻列表的默认数据</span></span><br><span class="line">        <span class="attr">newsList</span>: [],</span><br><span class="line">        <span class="comment">// 是否加载完成</span></span><br><span class="line">        <span class="attr">finished</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="comment">// 加载完毕的提示</span></span><br><span class="line">        <span class="attr">over</span>: <span class="string">&quot;&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="comment">// 获取热点新闻</span></span><br><span class="line">        <span class="title function_">getHotNews</span>().<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 将数据保存</span></span><br><span class="line">            <span class="keyword">if</span> (res.<span class="property">status</span> === <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                    <span class="attr">hotNews</span>: res.<span class="property">data</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 初次加载新闻，主动加载</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">loadNews</span>()</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 加载新闻，结合初次加载（主动）及后续的被动加载（加载更多）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">loadNews</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">finished</span>) &#123;</span><br><span class="line">            <span class="comment">// 表示有数据要请求</span></span><br><span class="line">            <span class="title function_">getNewsList</span>(<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">page</span>).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">page</span> &lt; res.<span class="property">data</span>.<span class="property">last_page</span>) &#123;</span><br><span class="line">                    <span class="comment">// 后面还可以接着请求，页码+1，保存数据</span></span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                        <span class="attr">page</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">page</span> + <span class="number">1</span>,</span><br><span class="line">                        <span class="attr">newsList</span>: [...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">newsList</span>, ...res.<span class="property">data</span>.<span class="property">data</span>]</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                        <span class="attr">finished</span>: <span class="literal">true</span>,</span><br><span class="line">                        <span class="attr">newsList</span>: [...<span class="variable language_">this</span>.<span class="property">data</span>.<span class="property">newsList</span>, ...res.<span class="property">data</span>.<span class="property">data</span>],</span><br><span class="line">                        <span class="attr">over</span>: <span class="string">&quot;------- 别扒拉了 -------&quot;</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 实现页面的跳转，眺详情</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">goto</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="comment">// 获取新闻的id</span></span><br><span class="line">        <span class="keyword">let</span> id = e.<span class="property">currentTarget</span>.<span class="property">dataset</span>.<span class="property">id</span></span><br><span class="line">        <span class="comment">// 跳转</span></span><br><span class="line">        wx.<span class="title function_">navigateTo</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/pages/detail/detail?id=&#x27;</span> + id,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面上拉触底事件的处理函数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onReachBottom</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// 加载更多</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">loadNews</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>需求4：新闻详情展示和点击量自增</p><p>修改config&#x2F;url.js关于地址的配置：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 新闻详情的地址</span></span><br><span class="line"><span class="attr">news_detail</span>: prefix + <span class="string">&quot;news/&quot;</span>,</span><br><span class="line"><span class="comment">// 用户登录地址</span></span><br><span class="line"><span class="attr">login</span>: prefix + <span class="string">&quot;login&quot;</span>,</span><br><span class="line"><span class="comment">// 记录新闻的点击量</span></span><br><span class="line"><span class="attr">addRecord</span>: prefix + <span class="string">&quot;addRecord&quot;</span></span><br></pre></td></tr></table></figure><p>修改文件models&#x2F;news_model.js增加模型方法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取新闻详情的方法</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getNewsDetail</span> = (<span class="params">id</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">        <span class="comment">// 传参请注意，采用的restful形式</span></span><br><span class="line">        <span class="attr">url</span>: url.<span class="property">news_detail</span> + id</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现用户登录获取用户的唯一标识符openid</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加点击量</span></span><br></pre></td></tr></table></figure><blockquote><p>了解openid：是用户身份的标识符，为了方便开发者识别用户的。其是一个字符串，包含了数字和字母。</p><p>openid有一个特征，同一个用户在使用很多个应用的时候，<strong>每个应用获取到这个用户的openid值是不一样的</strong>。例如，张三在使用App1,App1程序获取到其openid可能是123456789，App2获取到张三的openid可能是234567890。</p><p>openid的获取需要依赖于小程序控制台获取到的俩个信息：appid、appsecret。appid是存在小程序端的，用户可见。但是appsecret在实际开发的时候是存储在后端的（不是小程序端）。</p><p>openid的获取：</p><ul><li>a. 调用wx.login的api获得code<ul><li><a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html">https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html</a></li></ul></li><li>b. 将code与appid及appsecret（后端）三个参数一起去腾讯换openid【由后端去换】</li><li>【后端要做】c. 在换取到openid之后，去数据库中判断该openid是否存在（判断当前这个用户是新用户还是老用户），如果在则直接登录，如果不在后端会往数据库中建立一个用户账号。最终返回给前端openid及用户在项目中标识符（一般是用户名或用户id号）</li></ul><p>a. 新建配置文件，存储公共的配置项</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config/config.js</span></span><br><span class="line"><span class="comment">// 存放通用的配置</span></span><br><span class="line"><span class="keyword">const</span> appid = <span class="string">&quot;wxf8173895cc084401&quot;</span></span><br><span class="line"><span class="keyword">const</span> appsecret = <span class="string">&quot;826fd887304fbaffcf8e8b9ee3f5a73d&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    appid,</span><br><span class="line">    appsecret</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>b. 在模型中新加对应的方法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 作用：根据业务需要，进行数据请求和处理，返回最终需要的数据</span></span><br><span class="line"><span class="comment">// 本质上来说，就是一堆方法的集合</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 导入地址和请求方法（注意是否以“/”开头）</span></span><br><span class="line"><span class="keyword">import</span> url <span class="keyword">from</span> <span class="string">&quot;../config/url&quot;</span></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&quot;../services/http&quot;</span></span><br><span class="line"><span class="comment">// 导入配置文件</span></span><br><span class="line"><span class="keyword">import</span> cfg <span class="keyword">from</span> <span class="string">&quot;../config/config&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 实现用户登录获取用户的唯一标识符openid</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getCode</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        wx.<span class="title function_">login</span>(&#123;</span><br><span class="line">            <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> <span class="title function_">resolve</span>(res.<span class="property">code</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 获取openid，要使用async/await务必要开启增强编译，否则报错</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getOpenId</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 获取缓存数据</span></span><br><span class="line">    <span class="keyword">let</span> openid = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;openid&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> (!openid) &#123;</span><br><span class="line">        <span class="keyword">let</span> code = <span class="keyword">await</span> <span class="title function_">getCode</span>();</span><br><span class="line">        <span class="comment">// 请求后端，拿code+appid+appsecret去交换openid</span></span><br><span class="line">        openid = <span class="keyword">await</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: url.<span class="property">login</span>,</span><br><span class="line">            <span class="attr">data</span>: &#123;</span><br><span class="line">                code,</span><br><span class="line">                <span class="attr">appid</span>: cfg.<span class="property">appid</span>,</span><br><span class="line">                <span class="attr">appsecret</span>: cfg.<span class="property">appsecret</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 存储到缓存中</span></span><br><span class="line">        wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;openid&#x27;</span>, openid)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> openid</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加点击量</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">addRecord</span> = (<span class="params">user_id, article_id</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">http</span>(&#123;</span><br><span class="line">        <span class="attr">url</span>: url.<span class="property">addRecord</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">            user_id,</span><br><span class="line">            article_id</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&quot;POST&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>c. 在页面的js文件中添加对应的操作</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/detail/detail.js</span></span><br><span class="line"><span class="comment">// 导入模型中的方法</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    getNewsDetail,</span><br><span class="line">    getOpenId,</span><br><span class="line">    addRecord</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">&quot;../../models/news_model&quot;</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="comment">// 获取新闻的id</span></span><br><span class="line">        <span class="keyword">let</span> id = options.<span class="property">id</span></span><br><span class="line">        <span class="comment">// 主动依据新闻id获取新闻的内容</span></span><br><span class="line">        <span class="title function_">getNewsDetail</span>(id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                <span class="attr">newsInfo</span>: res.<span class="property">data</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="comment">// 获取openid</span></span><br><span class="line">        <span class="keyword">let</span> openid = <span class="keyword">await</span> <span class="title function_">getOpenId</span>()</span><br><span class="line">        <span class="comment">// 记录访问</span></span><br><span class="line">        <span class="title function_">addRecord</span>(openid.<span class="property">data</span>.<span class="property">id</span>,id).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></blockquote><h3 id="2-3、我的页面"><a href="#2-3、我的页面" class="headerlink" title="2.3、我的页面"></a>2.3、我的页面</h3><ul><li><p>tabBar</p></li><li><p>获取用户的头像和用户名，并且展示在页面上（授权）</p></li></ul><p>知识点：微信小程序授权</p><p>预期实现目标：如果用户已经授权了，则显示用户的头像，如果没有授权，给用户展示授权按钮。</p><p>授权接口文档：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html">https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html</a></p><p><strong>授权注意点</strong></p><p>获取用户信息。页面产生点击事件（例如 <code>button</code> 上 <code>bindtap</code> 的回调中）后才可调用，每次请求都会弹出授权窗口，用户同意后返回 <code>userInfo</code>。该接口用于替换 <code>wx.getUserInfo</code></p><ul><li>需要通过给用户一个按钮，来进行授权</li><li>在获取到用户的信息之后，我们也建议做一下缓存操作</li></ul><p><strong>实现：wxml代码</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--pages/center/center.wxml--&gt;</span><br><span class="line">&lt;!-- 在此页面展示用户的基本信息（用户已经登录）/没有登录则展示登录按钮 --&gt;</span><br><span class="line">&lt;!-- 类似于小程序刚初始化好的index页面 --&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- </span><br><span class="line">    button组件有一个属性：open-type，加上这个属性后，其支持开放功能，用户登录就属于开放功能</span><br><span class="line">    接口：https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html</span><br><span class="line"></span><br><span class="line"> --&gt;</span><br><span class="line"></span><br><span class="line">&lt;view wx:if=&quot;&#123;&#123;!isLogin&#125;&#125;&quot;&gt;</span><br><span class="line">    &lt;button type=&quot;primary&quot; open-type=&quot;getUserInfo&quot; bindtap=&quot;getInfo&quot;&gt;登录&lt;/button&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;view wx:if=&quot;&#123;&#123;isLogin&#125;&#125;&quot;&gt;</span><br><span class="line">    &lt;image src=&quot;&#123;&#123;user_info.avatarUrl&#125;&#125;&quot; style=&quot;width: 132px;height:132px;&quot; /&gt;</span><br><span class="line">    &lt;view&gt;昵称：&#123;&#123;user_info.nickName&#125;&#125;&lt;/view&gt;</span><br><span class="line">    &lt;view&gt;性别：&#123;&#123;user_info.gender === 1 ? &quot;男&quot; : &quot;女&quot;&#125;&#125;&lt;/view&gt;</span><br><span class="line">    &lt;view&gt;国家：&#123;&#123;user_info.country&#125;&#125;&lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure><p><strong>逻辑代码</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// pages/center/center.js</span></span><br><span class="line"><span class="title class_">Page</span>(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 页面的初始数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">isLogin</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取用户信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">getInfo</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> _this = <span class="variable language_">this</span></span><br><span class="line">        wx.<span class="title function_">getUserProfile</span>(&#123;</span><br><span class="line">            <span class="attr">desc</span>: <span class="string">&#x27;获取用户信息以登录&#x27;</span>,</span><br><span class="line">            <span class="attr">success</span>: <span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// 做一个缓存数据的处理</span></span><br><span class="line">                <span class="comment">// 将返回的用户信息转成对象形式</span></span><br><span class="line">                <span class="keyword">let</span> obj = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(res.<span class="property">rawData</span>)</span><br><span class="line">                wx.<span class="title function_">setStorageSync</span>(<span class="string">&#x27;user_info&#x27;</span>, obj)</span><br><span class="line">                _this.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                    <span class="attr">isLogin</span>: <span class="literal">true</span>,</span><br><span class="line">                    <span class="attr">user_info</span>: obj</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生命周期函数--监听页面加载</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="attr">onLoad</span>: <span class="keyword">function</span> (<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="comment">// 获取缓存中的用户信息</span></span><br><span class="line">        <span class="keyword">let</span> user_info = wx.<span class="title function_">getStorageSync</span>(<span class="string">&#x27;user_info&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span> (user_info) &#123;</span><br><span class="line">            <span class="comment">// 如果有则使用</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">setData</span>(&#123;</span><br><span class="line">                user_info,</span><br><span class="line">                <span class="attr">isLogin</span>: <span class="literal">true</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// console.log(user_info);</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>小程序在2019年发布了对于登录授权的规范建议，要求不再强制用户一打开小程序就要求登录授权，而是通过按钮点击触发授权，需要用户主动操作。文档见：<a target="_blank" rel="noopener" href="https://developers.weixin.qq.com/community/operate/doc/000640bb8441b82900e89f48351401">https://developers.weixin.qq.com/community/operate/doc/000640bb8441b82900e89f48351401</a></p></blockquote><h2 id="3、作业"><a href="#3、作业" class="headerlink" title="3、作业"></a>3、作业</h2><ul><li><p>实现用户信息的获取，并展示在<code>我的</code>界面</p><ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/user">https://mpapi.iynn.cn/api/v1/user</a></li><li>请求类型：get</li><li>参数：<ul><li>user_id：用户id号</li></ul></li><li>请求示例：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/user?user_id=13">https://mpapi.iynn.cn/api/v1/user?user_id=13</a></li></ul></li><li><p>在授权取得用户昵称头像等信息后，将其提交给接口更新到后端数据库</p><ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/user">https://mpapi.iynn.cn/api/v1/user</a></li><li>请求类型：post</li><li>参数：<ul><li>truename：真实姓名（如果有）</li><li>phone：手机号（如果有）</li><li>email：电子邮箱（如果有）</li><li>age：年龄（如果有）</li><li>sex：性别</li></ul></li></ul></li><li><p>给文章加上点赞功能</p><ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/addLike">https://mpapi.iynn.cn/api/v1/addLike</a></li><li>请求类型：post</li><li>参数：<ul><li>user_id：用户id</li><li>article_id：新闻id</li></ul></li></ul></li><li><p>给文章加上收藏功能</p><ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/addFav">https://mpapi.iynn.cn/api/v1/addFav</a></li><li>请求类型：post</li><li>参数<ul><li>user_id：用户id</li><li>article_id：新闻id</li></ul></li></ul></li><li><p>在<code>我的</code>页面加上<code>浏览记录</code>功能</p><ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/record">https://mpapi.iynn.cn/api/v1/record</a></li><li>请求类型：get</li><li>请求参数：<ul><li>user_id：用户id（必须）</li><li>page：分页页码（可选，默认为1）</li></ul></li><li>请求示例：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/record?user_id=13">https://mpapi.iynn.cn/api/v1/record?user_id=13</a></li></ul></li><li><p>在<code>我的</code>页面加上<code>点赞记录</code>功能</p><ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/like">https://mpapi.iynn.cn/api/v1/like</a></li><li>请求类型：get</li><li>请求参数：<ul><li>user_id：用户id（必须）</li><li>page：分页页码（可选，默认为1）</li></ul></li><li>请求示例：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/like?user_id=13">https://mpapi.iynn.cn/api/v1/like?user_id=13</a></li></ul></li><li><p>在<code>我的</code>页面加上<code>我的收藏</code>功能</p><ul><li>接口地址：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/fav">https://mpapi.iynn.cn/api/v1/fav</a></li><li>请求类型：get</li><li>请求参数：<ul><li>user_id：用户id（必须）</li><li>page：分页页码（可选，默认为1）</li></ul></li><li>请求示例：<a target="_blank" rel="noopener" href="https://mpapi.iynn.cn/api/v1/fav?user_id=13">https://mpapi.iynn.cn/api/v1/fav?user_id=13</a></li></ul></li></ul><h2 id="4、小程序的发布"><a href="#4、小程序的发布" class="headerlink" title="4、小程序的发布"></a>4、小程序的发布</h2><p>a. 右键小程序开发者工具界面右上角的<code>上传</code>按钮，将代码上传</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/cc035e644786fcf4201ab3bece5e6f1f0ba7382b.png?sign=dae0c2e17b28301e317a19aa73934954&t=5fb6aaf3"></p><p>b. 填写小程序代码的版本及备注信息</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/388dc3c499b067d844d1a870c36a1b4668fb678f.png?sign=42ca1d49942d1419c39377029c04d952&t=5fb6ab4f"></p><p>c. 完成代码上传</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/db2ed2fc4794e27cdf00f6220277b9918a5c8b28.png?sign=600dda2dd426102dc7cc3a69649e5d54&t=5fb6ab86"></p><blockquote><p>如果小程序的帐号并不是我们自己管理的，则我们的工作到此就为止了，后续由管理员去进行（但是你得通知到）</p></blockquote><p>d. 使用小程序管理帐号进入开发者控制台提交小程序信息，待腾讯审核通过后即可发布</p><blockquote><p>审核需要时效。后续操作，按照页面的引导操作即可。</p></blockquote><h1 id="十六、uni-app"><a href="#十六、uni-app" class="headerlink" title="十六、uni-app"></a>十六、uni-app</h1><p>网址：<a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/">https://uniapp.dcloud.io/</a></p><p>uni-app是一个使用Vue.js开发所有前端应用的框架，开发者编写<strong>一套代码</strong>，可发布到iOS、Android、H5、以及各种小程序（微信&#x2F;支付宝&#x2F;百度&#x2F;头条&#x2F;QQ&#x2F;钉钉&#x2F;淘宝）、快应用等多个平台。</p><p><img src="https://i.loli.net/2021/10/15/EYDeWA3F6iBnmsq.png" alt="image-20211015153116722"></p><h2 id="1、uniapp-发展史"><a href="#1、uniapp-发展史" class="headerlink" title="1、uniapp 发展史"></a>1、uniapp 发展史</h2><p>读 you ni，是统一的意思，DCloud于2012年开始研发小程序技术，优化 webview 的功能和性能，并推出了 Hbuilder 开发工具</p><ul><li>2015年，Dcloud 正式商用了自己的小程序，产品名为“流应用”</li><li>DCloud持续在业内普及小程序理念，推进各大流量业务</li><li>开发者面对如此多的私有标准，造成混乱的局面</li><li>开发一个免费开源的框架，通过这个框架为开发者抹平各平台差异</li></ul><p>![](<a target="_blank" rel="noopener" href="https://storage.lynnn.cn/assets/markdown/91147/pictures/2021/06/60822f2bc36e09b79992b4b8eb9c322b8c7b655b.png?sign=3bb72e4c9dd28c23df47f8029da531a8&t=60c24b54">https://storage.lynnn.cn/assets/markdown/91147/pictures/2021/06/60822f2bc36e09b79992b4b8eb9c322b8c7b655b.png?sign=3bb72e4c9dd28c23df47f8029da531a8&amp;t=60c24b54</a></p><h2 id="2、uniapp-优缺点"><a href="#2、uniapp-优缺点" class="headerlink" title="2、uniapp 优缺点"></a>2、uniapp 优缺点</h2><ul><li>优点：<ol><li>uni-app 对前端开发人员比较友好，学习成本比较低，基于 vue.js</li><li>uni-app 使用vue的语法+小程序的标签和API。</li><li>使用 hbx 进行开发，hbx 对于 vue 语法等支持可以说是比较完备</li><li>拓展能力强，封装了H5+,支持 nvue，也支持原生Android，ios开发</li></ol></li><li>缺点：<ol><li>问世的时间还比较短，有很多地方还不是完善，坑很多</li><li>对于使用中的一些 bug 及问题，官方回应的不是很及时</li></ol></li></ul><h2 id="3、uniapp-开发规范"><a href="#3、uniapp-开发规范" class="headerlink" title="3、uniapp 开发规范"></a>3、uniapp 开发规范</h2><p>为了实现多端兼容，综合考虑编译速度、运行性能等因素，uni-app 约定了开发规范</p><h2 id="4、基本使用"><a href="#4、基本使用" class="headerlink" title="4、基本使用"></a>4、基本使用</h2><h3 id="4-1、创建小程序项目"><a href="#4-1、创建小程序项目" class="headerlink" title="4.1、创建小程序项目"></a>4.1、创建小程序项目</h3><p>两种创建方式：</p><ul><li><a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/quickstart?id=_1-%E9%80%9A%E8%BF%87-hbuilderx-%E5%8F%AF%E8%A7%86%E5%8C%96%E7%95%8C%E9%9D%A2">通过HBuilderX可视化界面</a>（推荐）</li><li>HBuilderX是绿色包，需要解压然后才能使用，运行HBuildX.exe即可</li><li><a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/quickstart?id=_2-%E9%80%9A%E8%BF%87vue-cli%E5%91%BD%E4%BB%A4%E8%A1%8C">通过vue-cli命令行</a></li></ul><p>如果使用uniapp开发小程序，后续需要使用文档，请去uniapp官网文档去复制，不要再去各自小程序的文档中复制了。</p><p>使用hbuilderX 编辑工具创建项目：</p><p><img src="https://i.loli.net/2021/10/15/FDY2LlSGNRwK7bM.png" alt="image-20211015154138752"></p><h3 id="4-2、目录结构"><a href="#4-2、目录结构" class="headerlink" title="4.2、目录结构"></a>4.2、目录结构</h3><p><img src="https://i.loli.net/2021/10/15/A5k8l1a2fsYC4n6.png" alt="image-20211015154523076"></p><h3 id="4-3、配置选项"><a href="#4-3、配置选项" class="headerlink" title="4.3、配置选项"></a>4.3、配置选项</h3><p>文档地址：<a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/collocation/pages">https://uniapp.dcloud.io/collocation/pages</a></p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">			<span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;navigationStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;custom&quot;</span></span><br><span class="line">		<span class="punctuation">&#125;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/fen/fen&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">			<span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;分类&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;navigationStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;custom&quot;</span></span><br><span class="line">		<span class="punctuation">&#125;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/car/car&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">			<span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;购物车&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;navigationStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;custom&quot;</span></span><br><span class="line">		<span class="punctuation">&#125;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/mine/mine&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">			<span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;navigationStyle&quot;</span><span class="punctuation">:</span><span class="string">&quot;custom&quot;</span></span><br><span class="line">		<span class="punctuation">&#125;</span></span><br><span class="line">	<span class="punctuation">&#125;</span><span class="punctuation">]</span>，</span><br><span class="line"> 	<span class="attr">&quot;tabBar&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">	    <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#7A7E83&quot;</span><span class="punctuation">,</span></span><br><span class="line">	    <span class="attr">&quot;selectedColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#3cc51f&quot;</span><span class="punctuation">,</span></span><br><span class="line">	    <span class="attr">&quot;borderStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">	    <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#ffffff&quot;</span><span class="punctuation">,</span></span><br><span class="line">	    <span class="attr">&quot;list&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">&#123;</span></span><br><span class="line">	        <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">	        <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/img/index1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">	        <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/img/index2.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">	        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;首页&quot;</span></span><br><span class="line">	    <span class="punctuation">&#125;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span></span><br><span class="line">	       <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/fen/fen&quot;</span><span class="punctuation">,</span></span><br><span class="line">	       <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/img/fen1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">	       <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/img/fen2.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">	       <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;分类&quot;</span></span><br><span class="line">	    <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">	       <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/car/car&quot;</span><span class="punctuation">,</span></span><br><span class="line">	       <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/img/car1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">	       <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/img/car2.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">	       <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;购物车&quot;</span></span><br><span class="line">	    <span class="punctuation">&#125;</span><span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">	       <span class="attr">&quot;pagePath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/mine/mine&quot;</span><span class="punctuation">,</span></span><br><span class="line">	       <span class="attr">&quot;iconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/img/mine1.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">	       <span class="attr">&quot;selectedIconPath&quot;</span><span class="punctuation">:</span> <span class="string">&quot;static/img/mine2.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">	       <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;我的&quot;</span></span><br><span class="line">	    <span class="punctuation">&#125;</span><span class="punctuation">]</span></span><br><span class="line">	<span class="punctuation">&#125;</span></span><br><span class="line">  </span><br></pre></td></tr></table></figure><h3 id="4-4、组件"><a href="#4-4、组件" class="headerlink" title="4.4、组件"></a>4.4、组件</h3><p>文档地址：<a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/component/README">https://uniapp.dcloud.io/component/README</a></p><h3 id="4-5、页面布局"><a href="#4-5、页面布局" class="headerlink" title="4.5、页面布局"></a>4.5、页面布局</h3><p>同微信小程序布局一样，使用的单位也是rpx ，可以以iphone6 为视觉稿。</p><h3 id="4-6、样式"><a href="#4-6、样式" class="headerlink" title="4.6、样式"></a>4.6、样式</h3><p>在 App.vue 中的样式为全局样式，作用于每一个页面。</p><p>在 pages 目录下 的 vue 文件中定义的样式为局部样式。</p><p>局部样式只作用在对应的页面，并会覆盖 App.vue 中相同的选择器。</p><h4 id="1-外部样式导入"><a href="#1-外部样式导入" class="headerlink" title="1.外部样式导入"></a>1.外部样式导入</h4><p>在static 静态目录下可以导入外联样式表,使用@import 后跟需要导入的外联样式表的相对路径，用;表示语句结束</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line"><span class="comment">/* 导入外链样式 */</span></span><br><span class="line"><span class="keyword">@import</span> url(<span class="string">&quot;static/css/common.css&quot;</span>);</span><br><span class="line"><span class="comment">/* 全局css样式 */</span></span><br><span class="line">page&#123;</span><br><span class="line">	<span class="attribute">width</span>: <span class="number">750</span>rpx;</span><br><span class="line">	<span class="attribute">font-size</span>:<span class="number">24</span>rpx</span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="comment">/* 解决头条小程序组件内引入字体不生效的问题 */</span></span><br><span class="line"><span class="comment">/* #ifdef MP-TOUTIAO */</span></span><br><span class="line"><span class="keyword">@font-face</span> &#123;</span><br><span class="line">	<span class="attribute">font-family</span>: uniicons;</span><br><span class="line">	<span class="attribute">src</span>: <span class="built_in">url</span>(<span class="string">&#x27;/static/uni.ttf&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* #endif */</span></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p><strong>注意：如果在app.vue 中导入，则此外联样式为全局样式</strong></p><h4 id="2-style和class-样式"><a href="#2-style和class-样式" class="headerlink" title="2.  style和class 样式"></a>2. style和class 样式</h4><ul><li><p>style：静态的样式统一写到 class 中。style 接收动态的样式，在运行时会解析，请尽量避免将静态的样式写进 style 中，以免影响渲染速度</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view :style=&#x27;&#123;color:color&#125;&#x27;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure></li><li><p>class：用于指定样式规则，其属性值是样式规则中类选择器名(样式类名)的集合，样式类名不需要带上.，样式类名之间用空格分隔</p></li></ul><h3 id="4-7-选择器"><a href="#4-7-选择器" class="headerlink" title="4.7 选择器"></a>4.7 选择器</h3><p>注意：在 uni-app 中不能使用 * 选择器，page 相当于 body 节点，支持的选择器有：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">选择器	样例	样例描述</span><br><span class="line">.class	.intro	选择所有拥有 class=&quot;intro&quot; 的组件</span><br><span class="line">#id	#firstname	选择拥有 id=&quot;firstname&quot; 的组件</span><br><span class="line">element	view	选择所有 view 组件</span><br><span class="line">element, element	view, checkbox	选择所有文档的 view 组件和所有的 checkbox 组件</span><br><span class="line">::after	view::after	在 view 组件后边插入内容，仅 vue 页面生效</span><br><span class="line">::before	view::before	在 view 组件前边插入内容，仅 vue 页面生效</span><br></pre></td></tr></table></figure><h3 id="4-8-页面栈"><a href="#4-8-页面栈" class="headerlink" title="4.8  页面栈"></a>4.8 页面栈</h3><ul><li>uni.navigateTo({ url: ‘test?id&#x3D;1&amp;name&#x3D;uniapp’ });</li><li>uni.redirectTo({ url: ‘test?id&#x3D;1’ });</li><li>uni.reLaunch({ url: ‘test?id&#x3D;1’ });</li><li>uni.switchTab({ url: ‘&#x2F;pages&#x2F;index&#x2F;index’ });</li><li>uni.navigateBack({ delta: 2 });</li></ul><h3 id="4-9、网络请求"><a href="#4-9、网络请求" class="headerlink" title="4.9、网络请求"></a>4.9、网络请求</h3><p>文档地址：<a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/api/request/request">https://uniapp.dcloud.io/api/request/request</a></p><h3 id="4-10、生命周期"><a href="#4-10、生命周期" class="headerlink" title="4.10、生命周期"></a>4.10、生命周期</h3><p>uni-app 完整支持 Vue 实例的生命周期，还新增应用生命周期及页面生命周期，即uniapp 对vue 和小程序的生命周期都支持。</p><ul><li><p>created</p></li><li><p>mounted</p></li><li><p>updated</p></li><li><p>destroyed</p></li><li><p>onload</p></li><li><p>onshow</p></li><li><p>onReady</p></li><li><p>onHide</p></li><li><p>onUnload</p></li></ul><h3 id="4-11、globalData"><a href="#4-11、globalData" class="headerlink" title="4.11、globalData"></a>4.11、globalData</h3><p>Vue 之前是没有这类概念的，但 uni-app 引入了globalData概念</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.vue 定义全局变量globalData</span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">	<span class="comment">// 整个uniapp 项目的生命周期</span></span><br><span class="line">	<span class="attr">onLaunch</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;App Launch&#x27;</span>);</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">onShow</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;App Show&#x27;</span>);</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">onHide</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">		<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;App Hide&#x27;</span>);</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="attr">globalData</span>:&#123;</span><br><span class="line">		<span class="comment">// 这是全局变量</span></span><br><span class="line">		<span class="attr">nameArr</span>:[<span class="string">&#x27;迪迦&#x27;</span>,<span class="string">&#x27;盖亚&#x27;</span>,<span class="string">&#x27;塞罗&#x27;</span>,<span class="string">&#x27;泰罗&#x27;</span>]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取globalData 全局变量</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">	<span class="keyword">let</span> app =  <span class="title function_">getApp</span>(); </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="2、跨端和条件编译"><a href="#2、跨端和条件编译" class="headerlink" title="2、跨端和条件编译"></a>2、跨端和条件编译</h2><h3 id="2-1-条件编译的必要性"><a href="#2-1-条件编译的必要性" class="headerlink" title="2.1 条件编译的必要性"></a>2.1 条件编译的必要性</h3><p>uni-app 已将常用的组件、JS API 封装到框架中，开发者按照 uni-app 规范开发即可保证多平台兼容，大部分业务均可直接满足，但每个平台有自己的一些特性，因此会存在一些无法跨平台的情况，大量写 if else，会造成代码执行性能低下和管理混乱，编译到不同的工程后二次修改，会让后续升级变的很麻烦</p><ul><li><p>编译期判断 编译期判断，即条件编译，不同平台在编译出包后已经是不同的代码</p><p><img src="https://i.loli.net/2021/10/15/HiC36aBMKJhvtx7.png" alt="image-20211015142820413"></p></li><li><p>条件编译是用特殊的注释作为标记，在编译时根据这些特殊的注释，将注释里面的代码编译到不同平台</p><p>语法：以 #ifdef 或 #ifndef 加 %PLATFORM% 开头，以 #endif 结尾</p><p>​ #ifdef：if defined 仅在某平台存在</p><p>​ #ifndef：if not defined 除了某平台均存在</p><p>​ %PLATFORM%：平台名称</p></li></ul><h3 id="2-2-条件编译类型"><a href="#2-2-条件编译类型" class="headerlink" title="2.2 条件编译类型"></a>2.2 条件编译类型</h3><ul><li><p>页面的条件编译</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- #ifdef H5 --&gt;</span><br><span class="line">	&lt;view class=&quot;&quot;&gt;</span><br><span class="line">		h5端</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;!-- #endif --&gt;</span><br><span class="line">		</span><br><span class="line">&lt;!-- #ifdef MP-WEIXIN --&gt;</span><br><span class="line">	&lt;view class=&quot;&quot;&gt;</span><br><span class="line">		微信端</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;!-- #endif --&gt;</span><br></pre></td></tr></table></figure></li><li><p>编译样式的条件</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* #ifdef H5 */</span></span><br><span class="line">	<span class="selector-class">.on</span>&#123;</span><br><span class="line">		<span class="attribute">font-size</span>: <span class="number">50</span>rpx;</span><br><span class="line">		<span class="attribute">background</span>: purple;</span><br><span class="line">	&#125;</span><br><span class="line"><span class="comment">/* #endif */</span></span><br></pre></td></tr></table></figure></li><li><p>pages.json的条件编译</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// #ifdef H5</span></span><br><span class="line">	<span class="punctuation">,</span><span class="punctuation">&#123;</span></span><br><span class="line">          <span class="attr">&quot;path&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;pages/detail/detail&quot;</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">&quot;style&quot;</span> <span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line"><span class="comment">// #endif</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>static目录的条件编译</p><p><img src="https://i.loli.net/2021/10/15/OCPir2lYgUeMDRK.png" alt="image-20211015144459111"></p></li></ul><h2 id="3、uniapp-插件使用"><a href="#3、uniapp-插件使用" class="headerlink" title="3、uniapp 插件使用"></a>3、uniapp 插件使用</h2><p>在项目中安装less 插件，<code>&lt;style lang=&#39;less&#39;&gt;&lt;/style&gt;</code></p><p>uni-search-bar 插件</p><h3 id="4-1、项目工作环境初始化"><a href="#4-1、项目工作环境初始化" class="headerlink" title="4.1、项目工作环境初始化"></a>4.1、项目工作环境初始化</h3><blockquote><p>uniapp的两种使用方式推荐使用基于<code>HBuilder X</code>的形式，因此在操作之前请先做好其安装工作。</p></blockquote><p>a. 使用<code>HBuilder x</code>新建一个项目</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/08d430e06a1c30d5d44ee4f8049de713360414f6.png?sign=8644aa037ad8640c3aa1669a05ea03d4&t=5fb6b614"></p><p>b. 填入项目的基本信息，项目名称根据自身需要自行决定</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/c276857ddeb81b5aab396a9a52ccf8f72a4a24eb.png?sign=1c9475427b39432cf8d9d38093da0377&t=5fb6b689"></p><p>c. 后续我们将使用<code>HBuilder X</code>进行编码、开发，而小程序开发者工具作为小程序的预览工作；为了将让<code>HBuilder X</code>能够将编译好的小程序代码准确的传给小程序开发者工具，此处我们需要设置小程序工具，以允许小程序开发者工具被其他程序调用：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/782b5bcee408e007ee740ba240f7d19b319d3e09.png?sign=9748085131addf2bb7478551db48bd28&t=5fb6b73d"></p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/f1e7e0dd8f0adbe529d446973ba69484ccba766c.png?sign=36758e62741d1ba409d041fd313b2546&t=5fb6b78b"></p><p>d. 在<code>HBuilder X</code>中设置运行，以体验执行效果</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/b2ea7aedfeaef422708322e31511b3e371517bbc.png?sign=d71b0379dff9abfe496acd78d8e5f89d&t=5fb6b7b4"></p><blockquote><p>启动时可能会弹出窗口询问<code>小程序开发者工具</code>的安装位置，如果弹出该窗口，请根据自己电脑上安装的位置选中安装目录，随后点击<code>确定</code>。</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2021/06/c4a67299b53e0b5d1053124a0acc8b94d4b4ae9d.png?sign=f7cc5be43dc5269dfcd9ce7c1310eb4d&t=60c24d58"></p></blockquote><p>最终设置操作完毕，后续我们每次在<code>HBuilder X</code>中修改的代码一经保存，微信小程序开发者工具就会实时更新显示效果。</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/2dcf57c89504a152c3aafe715f8d767340263ff2.png?sign=7338caf2a3bada94eeecd8941fdf2b48&t=5fb6b8a5"></p><p>另外不要忘了给我们的最终输出程序类型做配置：</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/5a9e731b8639d3f5cac12e5e22ff1929e6b19e20.png?sign=cf0aff0dc68ae5f7ac5c82db9e614551&t=5fb730a2"></p><p>如果需要其他类型的小程序输出，操作也是如此。</p><h3 id="4-2、重构swiper案例"><a href="#4-2、重构swiper案例" class="headerlink" title="4.2、重构swiper案例"></a>4.2、重构swiper案例</h3><p>此时已经不再是使用原生小程序语法，因此请<strong>务必：参考uni-app官网文档，结合vue框架语法</strong></p><p>a. 新建页面，右键<code>pages</code>，选择<code>新建页面</code></p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/482efdb8e631ae24d71731dcf1bff57236f3a3f3.png?sign=70157bd3c5872254993fd061ad284321&t=5fb731df"></p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/ff62f94c41d5b97a880970d77c27a6848c63877f.png?sign=e4a430da5dc13f92fe97bb0dde97435b&t=5fb73241"></p><p>b. 去<code>pages.json</code>文件中设置项目的启动页（将启动页的内容移动第一个元素）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;pages&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span> <span class="comment">//pages数组中第一项表示应用启动页，参考：https://uniapp.dcloud.io/collocation/pages</span></span><br><span class="line">		<span class="punctuation">&#123;</span></span><br><span class="line">			<span class="comment">// 将重构的案例放到最前面</span></span><br><span class="line">			<span class="attr">&quot;path&quot;</span> <span class="punctuation">:</span> <span class="string">&quot;pages/swiper/swiper&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;style&quot;</span> <span class="punctuation">:</span>                                                                                    </span><br><span class="line">			<span class="punctuation">&#123;</span></span><br><span class="line">				<span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">				<span class="attr">&quot;enablePullDownRefresh&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">			<span class="punctuation">&#125;</span></span><br><span class="line">			</span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="punctuation">&#123;</span></span><br><span class="line">			<span class="attr">&quot;path&quot;</span><span class="punctuation">:</span> <span class="string">&quot;pages/index/index&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">				<span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni-app&quot;</span></span><br><span class="line">			<span class="punctuation">&#125;</span></span><br><span class="line">		<span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">	<span class="attr">&quot;globalStyle&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;navigationBarTextStyle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;navigationBarTitleText&quot;</span><span class="punctuation">:</span> <span class="string">&quot;uni-app&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;navigationBarBackgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#F8F8F8&quot;</span></span><br><span class="line">	<span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>参考代码</strong></p><p>文档地址：<a target="_blank" rel="noopener" href="https://uniapp.dcloud.io/component/swiper">https://uniapp.dcloud.io/component/swiper</a></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">	&lt;!-- 在uniapp中，template标签就相当于之前的wxml文件 --&gt;</span><br><span class="line">	&lt;view&gt;</span><br><span class="line">		&lt;swiper class=&quot;swiper&quot; :indicator-dots=&quot;indicatorDots&quot; :autoplay=&quot;autoplay&quot; :interval=&quot;interval&quot; :duration=&quot;duration&quot;&gt;</span><br><span class="line">			&lt;!-- 循环输出获取到的数据 --&gt;</span><br><span class="line">			&lt;swiper-item v-for=&quot;(item,index) in swiper&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">				&lt;navigator :url=&quot;&#x27;/pages/detail/detail?id=&#x27; + item.id&quot;&gt;</span><br><span class="line">					&lt;image :src=&quot;item.pic&quot; /&gt;</span><br><span class="line">				&lt;/navigator&gt;</span><br><span class="line">			&lt;/swiper-item&gt;</span><br><span class="line">		&lt;/swiper&gt;</span><br><span class="line">	&lt;/view&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">	// 在uniapp中，script段落就相当于之前的js文件</span><br><span class="line">	export default &#123;</span><br><span class="line">		data() &#123;</span><br><span class="line">			return &#123;</span><br><span class="line">				// 是否显示轮播图的圆点</span><br><span class="line">				indicatorDots: true,</span><br><span class="line">				// 是否自动播放</span><br><span class="line">				autoplay: true,</span><br><span class="line">				// 一张图要显示的持续时间（单位是毫秒）</span><br><span class="line">				interval: 2000,</span><br><span class="line">				// 切换图片需要的时间（单位是毫秒）</span><br><span class="line">				duration: 500,</span><br><span class="line">				// swiper列表的数据</span><br><span class="line">				swiper: []</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		// vue的生命周期：created</span><br><span class="line">		created() &#123;</span><br><span class="line">			uni.request(&#123;</span><br><span class="line">				url: &#x27;https://mpapi.iynn.cn/api/v1/news/hot&#x27;, //仅为示例，并非真实接口地址。</span><br><span class="line">				success: (res) =&gt; &#123;</span><br><span class="line">					// console.log(res.data);</span><br><span class="line">					if (res.data.status == 0) &#123;</span><br><span class="line">						let arr = [];</span><br><span class="line">						res.data.data.forEach(el =&gt; &#123;</span><br><span class="line">							arr.push(&#123;</span><br><span class="line">								id: el.id,</span><br><span class="line">								pic: el.pic</span><br><span class="line">							&#125;)</span><br><span class="line">						&#125;)</span><br><span class="line">						// 将组装好的数据赋值给data中的swiper（vue的赋值，不是react的setState，也不是小程序的setData）</span><br><span class="line">						this.swiper = arr;</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;,</span><br><span class="line">		methods: &#123;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">	/* 在uniapp中，style标签就相当于之前的wxss文件 */</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h2 id="5、uniapp下的小程序发布"><a href="#5、uniapp下的小程序发布" class="headerlink" title="5、uniapp下的小程序发布"></a>5、uniapp下的小程序发布</h2><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2020/11/0bb75fbcdb1a0c8d6a22138d85d18b951088a887.png?sign=7ec1bf0841a380382574eba297dfef20&t=5fb6be25"></p><p>随后依据弹窗的窗口提示填写需要的信息，按照步骤进行即可。</p><p><img src="https://storage.lynnn.cn/assets/markdown/91147/pictures/2021/02/3d64f56507fabc0076157014270c580fae280af2.png?sign=6e64be8b9a4f4c990e80cdad3560a084&t=601d153b"></p><h2 id="6、uniapp下的app打包"><a href="#6、uniapp下的app打包" class="headerlink" title="6、uniapp下的app打包"></a>6、uniapp下的app打包</h2><p>1.首先在mainfest.json 中配置app 应用对应的配置项。</p><p><img src="https://i.loli.net/2021/11/25/A78as9YhwuBkHFz.png" alt="image-20211125174258910"></p><p>2.点击hbuilderX 发行,选择 <strong>原生App-云打包</strong></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者:</span> <span class="post-copyright-info"><a href="https://angelxyj.github.io">许小墨</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接:</span> <span class="post-copyright-info"><a href="https://angelxyj.github.io/posts/3fa6c23b.html">https://angelxyj.github.io/posts/3fa6c23b.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://angelxyj.github.io" target="_blank">许小墨のBlog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/%E6%A0%87%E7%AD%BE/%E5%89%8D%E7%AB%AF/">前端</a><a class="post-meta__tags" href="/%E6%A0%87%E7%AD%BE/%E6%A1%86%E6%9E%B6/">框架</a><a class="post-meta__tags" href="/%E6%A0%87%E7%AD%BE/%E5%B0%8F%E7%A8%8B%E5%BA%8F/">小程序</a></div><div class="post_share"><div class="social-share" data-image="/img/17.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>感谢支持！</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src="/img/wechat.png" alt="微信"></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="支付宝"></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/62120529.html" title="40-小程序开发"><img class="cover" src="/img/8.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">40-小程序开发</div></div></a></div><div class="next-post pull-right"><a href="/posts/7f86fc92.html" title="Vue3.x——选项式API"><img class="cover" src="/img/18.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Vue3.x——选项式API</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/posts/3de3cc7.html" title="小程序及UniAPP求职无忧含答案"><img class="cover" src="/img/14.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-17</div><div class="title">小程序及UniAPP求职无忧含答案</div></div></a></div><div><a href="/posts/57ee22ab.html" title="next.js"><img class="cover" src="/img/3.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-18</div><div class="title">next.js</div></div></a></div><div><a href="/posts/60af50c8.html" title="react-pc"><img class="cover" src="/img/7.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-18</div><div class="title">react-pc</div></div></a></div><div><a href="/posts/c22d7424.html" title="react-mobile"><img class="cover" src="/img/16.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-18</div><div class="title">react-mobile</div></div></a></div><div><a href="/posts/62120529.html" title="40-小程序开发"><img class="cover" src="/img/8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-06-26</div><div class="title">40-小程序开发</div></div></a></div><div><a href="/posts/59e6057e.html" title="01-Vue模板语法和指令"><img class="cover" src="/img/1.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-04</div><div class="title">01-Vue模板语法和指令</div></div></a></div></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div><div class="comment-switch"><span class="first-comment">Waline</span><span id="switch-btn"></span><span class="second-comment">Disqus</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div><div><div id="disqus_thread"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/touxiang.webp" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">许小墨</div><div class="author-info__description">全栈攻城狮的基本素养</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">198</div></a><a href="/%E6%A0%87%E7%AD%BE/"><div class="headline">标签</div><div class="length-num">183</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">42</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Angelxyj"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Angelxyj" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1440023258@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.</span> <span class="toc-text">微信小程序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0"><span class="toc-number">2.</span> <span class="toc-text">一、概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">2.1.</span> <span class="toc-text">1、小程序是什么？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%B8%8E%E7%BD%91%E9%A1%B5%E7%A8%8B%E5%BA%8Fh5%E5%BC%80%E5%8F%91%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">2.2.</span> <span class="toc-text">2、与网页程序h5开发的区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E4%B8%8E%E4%BC%A0%E7%BB%9FApp%E5%BC%80%E5%8F%91%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">2.3.</span> <span class="toc-text">3、与传统App开发的区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6%E7%BB%93%E6%9E%84"><span class="toc-number">2.4.</span> <span class="toc-text">4、小程序框架结构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%B8%90%E5%8F%B7%E7%94%B3%E8%AF%B7%E4%B8%8E%E7%99%BB%E5%BD%95%E8%AE%BE%E7%BD%AE"><span class="toc-number">3.</span> <span class="toc-text">二、帐号申请与登录设置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%B8%90%E5%8F%B7%E7%94%B3%E8%AF%B7"><span class="toc-number">3.1.</span> <span class="toc-text">1、帐号申请</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E7%99%BB%E5%BD%95%E5%8F%8A%E9%85%8D%E7%BD%AE%E8%8E%B7%E5%8F%96"><span class="toc-number">3.2.</span> <span class="toc-text">2、登录及配置获取</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%BE%AE%E4%BF%A1%E5%BC%80%E5%8F%91%E8%80%85%E5%B7%A5%E5%85%B7"><span class="toc-number">4.</span> <span class="toc-text">三、微信开发者工具</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%B7%A5%E5%85%B7%E7%9A%84%E4%B8%8B%E8%BD%BD%E4%B8%8E%E5%AE%89%E8%A3%85"><span class="toc-number">4.1.</span> <span class="toc-text">1、工具的下载与安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81helloworld%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.2.</span> <span class="toc-text">2、helloworld项目</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%8F%8A%E9%85%8D%E7%BD%AE"><span class="toc-number">5.</span> <span class="toc-text">四、小程序目录结构及配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">5.1.</span> <span class="toc-text">1、目录结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6app-json"><span class="toc-number">5.2.</span> <span class="toc-text">2、全局配置文件app.json</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F%E6%96%87%E4%BB%B6app-wxss"><span class="toc-number">5.3.</span> <span class="toc-text">3、全局样式文件app.wxss</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">5.4.</span> <span class="toc-text">4、小程序生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81%E5%85%A8%E5%B1%80%E6%95%B0%E6%8D%AE-globalData"><span class="toc-number">5.5.</span> <span class="toc-text">5、全局数据 globalData</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%94%E3%80%81WXML%E8%AF%AD%E6%B3%95"><span class="toc-number">6.</span> <span class="toc-text">五、WXML语法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81WXML%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">6.1.</span> <span class="toc-text">1、WXML数据绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81WXML%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.2.</span> <span class="toc-text">2、WXML循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81WXML%E5%88%A4%E6%96%AD"><span class="toc-number">6.3.</span> <span class="toc-text">3、WXML判断</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E6%A8%A1%E6%9D%BF%E9%A1%B5%E9%9D%A2%E5%BC%95%E7%94%A8"><span class="toc-number">6.4.</span> <span class="toc-text">4、模板页面引用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E9%A1%B5%E9%9D%A2%E5%86%85%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF%EF%BC%9A"><span class="toc-number">6.4.1.</span> <span class="toc-text">4.1 页面内使用模板：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AD%E3%80%81WXSS%E6%A0%B7%E5%BC%8F"><span class="toc-number">7.</span> <span class="toc-text">六、WXSS样式</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%83%E3%80%81tabBar"><span class="toc-number">8.</span> <span class="toc-text">七、tabBar</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%85%AB%E3%80%81%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">9.</span> <span class="toc-text">八、页面生命周期</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B9%9D%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-number">10.</span> <span class="toc-text">九、自定义事件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">10.1.</span> <span class="toc-text">1、事件绑定</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-number">10.2.</span> <span class="toc-text">2、事件对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E9%A1%B5%E9%9D%A2%E5%A4%96%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF"><span class="toc-number">10.2.1.</span> <span class="toc-text">4.2 页面外使用模板</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-include"><span class="toc-number">10.2.2.</span> <span class="toc-text">4.3 include</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E3%80%81%E5%B8%B8%E7%94%A8%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%BB%84%E4%BB%B6"><span class="toc-number">11.</span> <span class="toc-text">十、常用小程序组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%BB%84%E4%BB%B6%E4%BB%8B%E7%BB%8D"><span class="toc-number">11.1.</span> <span class="toc-text">1、组件介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E3%80%81%E5%B1%9E%E6%80%A7%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">11.1.1.</span> <span class="toc-text">1.1、属性值类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E3%80%81%E5%85%B1%E5%90%8C%E5%B1%9E%E6%80%A7"><span class="toc-number">11.1.2.</span> <span class="toc-text">1.2、共同属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E8%A7%86%E5%9B%BE%E5%AE%B9%E5%99%A8%E7%BB%84%E4%BB%B6"><span class="toc-number">11.2.</span> <span class="toc-text">2、视图容器组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81swiper"><span class="toc-number">11.2.1.</span> <span class="toc-text">2.1、swiper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81scroll-view"><span class="toc-number">11.2.2.</span> <span class="toc-text">2.2、scroll-view</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E8%A1%A8%E5%8D%95%E7%BB%84%E4%BB%B6"><span class="toc-number">11.3.</span> <span class="toc-text">3、表单组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81-%E5%AA%92%E4%BD%93%E7%BB%84%E4%BB%B6"><span class="toc-number">11.4.</span> <span class="toc-text">4、 媒体组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81-%E5%9C%B0%E7%90%86%E5%AE%9A%E4%BD%8D%E7%BB%84%E4%BB%B6"><span class="toc-number">11.5.</span> <span class="toc-text">5、 地理定位组件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%80%E3%80%81%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="toc-number">12.</span> <span class="toc-text">十一、自定义组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%8F%82"><span class="toc-number">12.1.</span> <span class="toc-text">1. 组件传参</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">12.2.</span> <span class="toc-text">2. 组件生命周期</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C%E3%80%81%E5%AF%BC%E8%88%AA%E6%96%B9%E5%BC%8F"><span class="toc-number">13.</span> <span class="toc-text">十二、导航方式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%9F%BA%E4%BA%8E%E7%BB%84%E4%BB%B6"><span class="toc-number">13.1.</span> <span class="toc-text">1、基于组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%9F%BA%E4%BA%8EApi"><span class="toc-number">13.2.</span> <span class="toc-text">2、基于Api</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%B8%89%E3%80%81%E7%95%8C%E9%9D%A2%E4%BA%A4%E4%BA%92%E6%96%B9%E6%B3%95"><span class="toc-number">14.</span> <span class="toc-text">十三、界面交互方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E6%98%BE%E7%A4%BA%E6%B6%88%E6%81%AF%E6%8F%90%E7%A4%BA%E6%A1%86"><span class="toc-number">14.1.</span> <span class="toc-text">1、显示消息提示框</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%98%BE%E7%A4%BA%E6%A8%A1%E6%80%81%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-number">14.2.</span> <span class="toc-text">2、显示模态对话框</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B%E3%80%81%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="toc-number">15.</span> <span class="toc-text">十四、网络请求</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E7%9A%84%E7%9B%B8%E5%85%B3%E8%AE%BE%E7%BD%AE"><span class="toc-number">15.1.</span> <span class="toc-text">1、网络请求的相关设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%8F%91%E8%B5%B7%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="toc-number">15.2.</span> <span class="toc-text">2、发起网络请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E7%BC%93%E5%AD%98"><span class="toc-number">15.3.</span> <span class="toc-text">3、缓存</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E4%BA%94%E3%80%81%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B"><span class="toc-number">16.</span> <span class="toc-text">十五、综合案例</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%88%E6%9E%9C%E6%BC%94%E7%A4%BA"><span class="toc-number">16.1.</span> <span class="toc-text">效果演示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81%E5%B0%81%E8%A3%85"><span class="toc-number">16.2.</span> <span class="toc-text">1、封装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E3%80%81%E8%AF%B7%E6%B1%82%E5%B0%81%E8%A3%85"><span class="toc-number">16.2.1.</span> <span class="toc-text">1.1、请求封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E3%80%81%E6%8E%A5%E5%8F%A3%E5%B0%81%E8%A3%85"><span class="toc-number">16.2.2.</span> <span class="toc-text">1.2、接口封装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">16.3.</span> <span class="toc-text">2、功能实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E"><span class="toc-number">16.3.1.</span> <span class="toc-text">2.1、接口说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81%E6%96%B0%E9%97%BB%E9%A1%B5%E9%9D%A2"><span class="toc-number">16.3.2.</span> <span class="toc-text">2.2、新闻页面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E3%80%81%E6%88%91%E7%9A%84%E9%A1%B5%E9%9D%A2"><span class="toc-number">16.3.3.</span> <span class="toc-text">2.3、我的页面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E4%BD%9C%E4%B8%9A"><span class="toc-number">16.4.</span> <span class="toc-text">3、作业</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%8F%91%E5%B8%83"><span class="toc-number">16.5.</span> <span class="toc-text">4、小程序的发布</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%81%E5%85%AD%E3%80%81uni-app"><span class="toc-number">17.</span> <span class="toc-text">十六、uni-app</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81uniapp-%E5%8F%91%E5%B1%95%E5%8F%B2"><span class="toc-number">17.1.</span> <span class="toc-text">1、uniapp 发展史</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81uniapp-%E4%BC%98%E7%BC%BA%E7%82%B9"><span class="toc-number">17.2.</span> <span class="toc-text">2、uniapp 优缺点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81uniapp-%E5%BC%80%E5%8F%91%E8%A7%84%E8%8C%83"><span class="toc-number">17.3.</span> <span class="toc-text">3、uniapp 开发规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">17.4.</span> <span class="toc-text">4、基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E3%80%81%E5%88%9B%E5%BB%BA%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%A1%B9%E7%9B%AE"><span class="toc-number">17.4.1.</span> <span class="toc-text">4.1、创建小程序项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E3%80%81%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">17.4.2.</span> <span class="toc-text">4.2、目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3%E3%80%81%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9"><span class="toc-number">17.4.3.</span> <span class="toc-text">4.3、配置选项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E3%80%81%E7%BB%84%E4%BB%B6"><span class="toc-number">17.4.4.</span> <span class="toc-text">4.4、组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5%E3%80%81%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80"><span class="toc-number">17.4.5.</span> <span class="toc-text">4.5、页面布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6%E3%80%81%E6%A0%B7%E5%BC%8F"><span class="toc-number">17.4.6.</span> <span class="toc-text">4.6、样式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%A4%96%E9%83%A8%E6%A0%B7%E5%BC%8F%E5%AF%BC%E5%85%A5"><span class="toc-number">17.4.6.1.</span> <span class="toc-text">1.外部样式导入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-style%E5%92%8Cclass-%E6%A0%B7%E5%BC%8F"><span class="toc-number">17.4.6.2.</span> <span class="toc-text">2. style和class 样式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-%E9%80%89%E6%8B%A9%E5%99%A8"><span class="toc-number">17.4.7.</span> <span class="toc-text">4.7 选择器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-%E9%A1%B5%E9%9D%A2%E6%A0%88"><span class="toc-number">17.4.8.</span> <span class="toc-text">4.8 页面栈</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9%E3%80%81%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82"><span class="toc-number">17.4.9.</span> <span class="toc-text">4.9、网络请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-10%E3%80%81%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">17.4.10.</span> <span class="toc-text">4.10、生命周期</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-11%E3%80%81globalData"><span class="toc-number">17.4.11.</span> <span class="toc-text">4.11、globalData</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E8%B7%A8%E7%AB%AF%E5%92%8C%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91"><span class="toc-number">17.5.</span> <span class="toc-text">2、跨端和条件编译</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7"><span class="toc-number">17.5.1.</span> <span class="toc-text">2.1 条件编译的必要性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%9D%A1%E4%BB%B6%E7%BC%96%E8%AF%91%E7%B1%BB%E5%9E%8B"><span class="toc-number">17.5.2.</span> <span class="toc-text">2.2 条件编译类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81uniapp-%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8"><span class="toc-number">17.6.</span> <span class="toc-text">3、uniapp 插件使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E3%80%81%E9%A1%B9%E7%9B%AE%E5%B7%A5%E4%BD%9C%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="toc-number">17.6.1.</span> <span class="toc-text">4.1、项目工作环境初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E3%80%81%E9%87%8D%E6%9E%84swiper%E6%A1%88%E4%BE%8B"><span class="toc-number">17.6.2.</span> <span class="toc-text">4.2、重构swiper案例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81uniapp%E4%B8%8B%E7%9A%84%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8F%91%E5%B8%83"><span class="toc-number">17.7.</span> <span class="toc-text">5、uniapp下的小程序发布</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6%E3%80%81uniapp%E4%B8%8B%E7%9A%84app%E6%89%93%E5%8C%85"><span class="toc-number">17.8.</span> <span class="toc-text">6、uniapp下的app打包</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/3d9e6dac.html" title="004_鸿蒙如何实现自定义 Canvas？底层如何进行 Ui 的渲染 flutter skia"><img src="/img/14.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="004_鸿蒙如何实现自定义 Canvas？底层如何进行 Ui 的渲染 flutter skia"></a><div class="content"><a class="title" href="/posts/3d9e6dac.html" title="004_鸿蒙如何实现自定义 Canvas？底层如何进行 Ui 的渲染 flutter skia">004_鸿蒙如何实现自定义 Canvas？底层如何进行 Ui 的渲染 flutter skia</a><time datetime="2024-06-12T21:53:42.000Z" title="发表于 2024-06-12 21:53:42">2024-06-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/4f9a63a7.html" title="003_了解过鸿蒙的 Napi 吗？如果我需要编译三方库如何链接？"><img src="/img/18.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="003_了解过鸿蒙的 Napi 吗？如果我需要编译三方库如何链接？"></a><div class="content"><a class="title" href="/posts/4f9a63a7.html" title="003_了解过鸿蒙的 Napi 吗？如果我需要编译三方库如何链接？">003_了解过鸿蒙的 Napi 吗？如果我需要编译三方库如何链接？</a><time datetime="2024-06-12T21:45:44.000Z" title="发表于 2024-06-12 21:45:44">2024-06-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/dda8b3d8.html" title="002_音视频开发，鸿蒙实现播放器的 Ui 部分+底层部分"><img src="/img/jujingyi.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="002_音视频开发，鸿蒙实现播放器的 Ui 部分+底层部分"></a><div class="content"><a class="title" href="/posts/dda8b3d8.html" title="002_音视频开发，鸿蒙实现播放器的 Ui 部分+底层部分">002_音视频开发，鸿蒙实现播放器的 Ui 部分+底层部分</a><time datetime="2024-06-12T21:35:34.000Z" title="发表于 2024-06-12 21:35:34">2024-06-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/1faddbca.html" title="001_组件化开发原理，鸿蒙组件化实现思路"><img src="/img/1.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="001_组件化开发原理，鸿蒙组件化实现思路"></a><div class="content"><a class="title" href="/posts/1faddbca.html" title="001_组件化开发原理，鸿蒙组件化实现思路">001_组件化开发原理，鸿蒙组件化实现思路</a><time datetime="2024-06-12T21:28:54.000Z" title="发表于 2024-06-12 21:28:54">2024-06-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/6d6b0b0f.html" title="019_Gauge"><img src="/img/9.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="019_Gauge"></a><div class="content"><a class="title" href="/posts/6d6b0b0f.html" title="019_Gauge">019_Gauge</a><time datetime="2024-06-12T21:24:14.000Z" title="发表于 2024-06-12 21:24:14">2024-06-12</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2024 By 许小墨</div><div class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_60306931/category_12251529.html">blog</a>!<br><span>备案号：xxxxxx</span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn(){"object"==typeof pangu?pangu.autoSpacingPage():getScript("https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js").then((()=>{pangu.autoSpacingPage()}))}function panguInit(){panguFn()}document.addEventListener("DOMContentLoaded",panguInit)</script><div class="js-pjax"><script>(()=>{const e=document.querySelectorAll("#article-container .mermaid-wrap");if(0===e.length)return;const t=()=>{window.loadMermaid=!0;const t="dark"===document.documentElement.getAttribute("data-theme")?"dark":"default";Array.from(e).forEach(((e,n)=>{const d=e.firstElementChild,r="mermaid-"+n,a="%%{init:{ 'theme':'"+t+"'}}%%\n"+d.textContent,i=mermaid.render(r,a);var m;"string"==typeof i?(m=i,d.insertAdjacentHTML("afterend",m)):i.then((({svg:e})=>{d.insertAdjacentHTML("afterend",e)}))}))},n=()=>{window.loadMermaid?t():getScript("https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js").then(t)};btf.addGlobalFn("themeChange",t,"mermaid"),window.pjax?n():document.addEventListener("DOMContentLoaded",n)})()</script><script>(()=>{let n=window.walineFn||null;const e=n=>{const e=n(Object.assign({el:"#waline-wrap",serverURL:"https://xuxiaomo-waline-i53b26l6n-xuxiaomo-xyj.vercel.app/",pageview:!1,dark:'html[data-theme="dark"]',path:window.location.pathname,comment:!1},null));btf.addGlobalFn("pjax",(()=>{e.destroy()}),"destroyWaline")},t=async()=>{if(n)e(n);else{await getCSS("https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css");const{init:t}=await import("https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js");n=t||Waline.init,e(n),window.walineFn=n}};btf.loadComment(document.getElementById("waline-wrap"),t)})()</script><script>(()=>{const t=function(){this.page.url="https://angelxyj.github.io/posts/3fa6c23b.html",this.page.identifier="/posts/3fa6c23b.html",this.page.title="41-小程序（重制版）"},e=()=>{window.DISQUS&&window.DISQUS.reset({reload:!0,config:t})};btf.addGlobalFn("themeChange",e,"disqus");const i=()=>{if(window.DISQUS)e();else{const t=document.createElement("script");t.src="https://xuxiaomo.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),document.head.appendChild(t)}};window.loadOtherComment=i})()</script></div><script>window.addEventListener("load",(()=>{const e=e=>{let t="";if(e.length)for(let a=0;a<e.length;a++){t+="<div class='aside-list-item'>";{const n="src";t+=`<a href='${e[a].url}' class='thumbnail'><img ${n}='${e[a].avatar}' alt='${e[a].nick}'></a>`}t+=`<div class='content'>\n        <a class='comment' href='${e[a].url}' title='${e[a].content}'>${e[a].content}</a>\n        <div class='name'><span>${e[a].nick} / </span><time datetime="${e[a].date}">${btf.diffDate(e[a].date,!0)}</time></div>\n        </div></div>`}else t+="没有评论";let a=document.querySelector("#card-newest-comments .aside-list");a&&(a.innerHTML=t),window.lazyLoadInstance&&window.lazyLoadInstance.update(),window.pjax&&window.pjax.refresh(a)},t=()=>{if(document.querySelector("#card-newest-comments .aside-list")){const t=saveToLocal.get("waline-newest-comments");t?e(JSON.parse(t)):(async()=>{try{const t=await fetch("https://xuxiaomo-waline-i53b26l6n-xuxiaomo-xyj.vercel.app/api/comment?type=recent&count=6",{method:"GET"}),a=(await t.json()).data.map((e=>{return{content:(t=e.comment,""===t||(t=(t=(t=(t=t.replace(/<img.*?src="(.*?)"?[^\>]+>/gi,"[图片]")).replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi,"[链接]")).replace(/<pre><code>.*?<\/pre>/gi,"[代码]")).replace(/<[^>]+>/g,"")).length>150&&(t=t.substring(0,150)+"..."),t),avatar:e.avatar,nick:e.nick,url:e.url+"#"+e.objectId,date:e.time||e.insertedAt};var t}));saveToLocal.set("waline-newest-comments",JSON.stringify(a),10/1440),e(a)}catch(e){console.error(e),document.querySelector("#card-newest-comments .aside-list").textContent="无法获取评论，请确认相关配置是否正确"}})()}};t(),document.addEventListener("pjax:complete",t)}))</script><div class="aplayer no-destroy" data-id="8760365089" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-autoplay="false"></div><script defer src="/live2d-widget/autoload.js"></script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script defer id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zindex="-1" mobile="true" data-click="true"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script src="//code.tidio.co/fpezrlnx14lzqj1yzhyigw0j3rkhtyzv.js" async></script><script>(()=>{{let i=!1;const d=()=>{window.tidioChatApi.hide(),i=!1},o=()=>{window.tidioChatApi.open(),window.tidioChatApi.show(),i=!0},t=()=>{window.tidioChatApi.hide(),window.tidioChatApi.on("close",d)};window.tidioChatApi?window.tidioChatApi.on("ready",t):document.addEventListener("tidioChat-ready",t),window.chatBtnFn=()=>{window.tidioChatApi&&(i?d():o())}}})()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"]):not([href="/music/"]):not([href="/no-pjax/"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(btf.removeGlobalFnEvent("pjax"),btf.removeGlobalFnEvent("themeChange"),document.getElementById("rightside").classList.remove("rightside-show"),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div><div class="app-refresh" id="app-refresh" style="position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease"><div class="app-refresh-wrap" style="display:flex;color:#fff;height:100%;align-items:center;justify-content:center"><label>✨ 糖果屋上新啦！ 👉</label><a href="javascript:void(0)" onclick="location.reload()"><span style="color:#fff;text-decoration:underline;cursor:pointer">🍭查看新品🍬</span></a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"✨ 糖果屋上新啦！ 👉",backgroundColor:t,duration:5e5,pos:e,actionText:"🍭查看新品🍬",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",(function(){showNotification()})),window.addEventListener("load",(function(){navigator.serviceWorker.register("/sw.js")})))</script></div></body></html>